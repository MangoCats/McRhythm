{
  "metadata": {
    "generated_date": "2025-10-19",
    "agent": "Agent 7B: Edit Plan Generator",
    "phase": "Phase 3 - Edit Plan Generation",
    "input_sources": [
      "docs/validation/phase2-design-improvements.json",
      "docs/validation/phase2-redundancies.json",
      "docs/validation/phase2-missing-references.json"
    ],
    "total_edits": 137,
    "documents_affected": 12,
    "edits_by_priority": {
      "HIGH": 45,
      "MEDIUM": 56,
      "LOW": 36
    },
    "edits_by_status": {
      "READY": 134,
      "BLOCKED_ON_T1_APPROVAL": 3
    },
    "estimated_line_reduction": 430
  },

  "blocking_issues": [
    {
      "blocker_id": "T1-TIMING-001",
      "title": "Tick-Based Timing Requires Tier 1 Approval",
      "description": "SPEC017 proposes tick-based timing (INTEGER ticks) instead of REAL seconds in database. This is a schema change requiring Tier 1 approval.",
      "affected_edits": ["EDIT-IMPL001-001", "EDIT-IMPL001-002", "EDIT-SPEC002-003"],
      "approval_required_from": "Tier 1 (Requirements)",
      "impact": "Database schema change affects passages table timing fields",
      "recommendation": "Defer edits referencing tick storage format until Tier 1 approval obtained for SPEC017"
    }
  ],

  "documents": [
    {
      "document": "SPEC014-single_stream_design.md",
      "tier": 2,
      "total_edits": 28,
      "priority_breakdown": {"HIGH": 12, "MEDIUM": 11, "LOW": 5},
      "estimated_line_reduction": 185,
      "summary": "Most contradictions with SPEC016. Needs extensive updates to align with new design.",

      "edits": [
        {
          "edit_id": "EDIT-SPEC014-001",
          "priority": "HIGH",
          "type": "ALIGN_WITH_NEW_DESIGN",
          "location": {
            "section": "Decoder Pool Lifecycle Specification",
            "lines": "114-122",
            "requirement_id": "SSD-DEC-030"
          },
          "current_content": "Pool Sizing: Fixed pool: 2 decoder threads. Rationale: Sufficient for current + next passage full decode",
          "new_content": "**NOTE: Design evolved to serial decode execution (SPEC016 [DBD-DEC-040]).**\n\nOriginal design: 2-thread parallel decoder pool.\n\nNew design: Serial decode execution with priority-based switching (one decoder at a time) for improved CPU cache coherency and reduced maximum processor load. See [SPEC016 Decoders](SPEC016-decoder_buffer_design.md#decoders) for authoritative specification.",
          "rationale": "SPEC016 specifies serial decoding for better cache performance and lower power consumption. This is a design improvement over the original 2-thread pool.",
          "status": "READY",
          "references_to_spec016_17": ["DBD-DEC-040"],
          "implementation_impact": "MAJOR",
          "implementation_notes": "Current implementation uses 2-thread pool. Migration to serial decode requires changes in wkmp-ap/src/playback/pipeline/single_stream/decoder.rs"
        },
        {
          "edit_id": "EDIT-SPEC014-002",
          "priority": "HIGH",
          "type": "ALIGN_WITH_NEW_DESIGN",
          "location": {
            "section": "Fade Curve Application",
            "lines": "202-205",
            "requirement_id": "SSD-FADE-012"
          },
          "current_content": "Fade Curve Application: Fade-in curve may be applied during decode, fade-out curve applied when decode reaches end time",
          "new_content": "Fade Curve Application: Fades applied during decode (pre-buffer) per [SPEC016 Fade In/Out handlers - DBD-FADE-030]. This eliminates per-sample multiplication overhead during playback. See [SPEC016](SPEC016-decoder_buffer_design.md#fade-inout-handlers) for rationale.",
          "rationale": "SPEC016 clarifies that fade application occurs before buffering (pre-buffer) for performance optimization.",
          "status": "READY",
          "references_to_spec016_17": ["DBD-FADE-030", "DBD-FADE-040", "DBD-FADE-050"],
          "implementation_impact": "MINOR",
          "implementation_notes": "Need to verify current implementation in wkmp-ap/src/playback/pipeline/single_stream/buffer.rs"
        },
        {
          "edit_id": "EDIT-SPEC014-003",
          "priority": "HIGH",
          "type": "REMOVE_REDUNDANCY",
          "location": {
            "section": "Decode-and-Skip Approach",
            "lines": "94-110"
          },
          "current_content": "[SSD-DEC-010] The decoder uses a decode-from-start-and-skip approach for reliable, sample-accurate positioning...\n[Full detailed explanation spanning 17 lines]",
          "new_content": "[SSD-DEC-010] Decoder uses decode-and-skip approach for sample-accurate positioning. See [SPEC016 Decoders](SPEC016-decoder_buffer_design.md#decoders) for complete specification:\n- [DBD-DEC-050]: Decode from file start\n- [DBD-DEC-060]: Skip samples before passage start\n- [DBD-DEC-070]: Buffer samples until end\n- [DBD-DEC-080]: Sample-accurate timing (~0.02ms @ 44.1kHz)",
          "rationale": "SPEC016 is now the authoritative source for decoder behavior. Replace detailed duplication with deep links.",
          "status": "READY",
          "references_to_spec016_17": ["DBD-DEC-050", "DBD-DEC-060", "DBD-DEC-070", "DBD-DEC-080"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC014-004",
          "priority": "MEDIUM",
          "type": "REMOVE_REDUNDANCY",
          "location": {
            "section": "Partial Buffer Strategy",
            "lines": "196-200"
          },
          "current_content": "Decode-and-skip approach: Always decode from the start of the audio file through to the end time",
          "new_content": "See [DBD-DEC-050] for decode-and-skip specification.",
          "rationale": "Duplicate of decode-and-skip explanation already removed in EDIT-SPEC014-003",
          "status": "READY",
          "references_to_spec016_17": ["DBD-DEC-050"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC014-005",
          "priority": "HIGH",
          "type": "REMOVE_REDUNDANCY",
          "location": {
            "section": "Memory Characteristics",
            "lines": "259"
          },
          "current_content": "Partial buffer (15-second): 44100 Hz * 2 channels * 4 bytes/sample * 15 sec = ~5.3 MB",
          "new_content": "Partial buffer: [DBD-PARAM-070] playout_ringbuffer_size (661941 samples = 15.01s @ 44.1kHz)",
          "rationale": "SPEC016 is authoritative source for buffer sizing. Remove memory calculation duplication.",
          "status": "READY",
          "references_to_spec016_17": ["DBD-PARAM-070"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC014-006",
          "priority": "HIGH",
          "type": "REMOVE_REDUNDANCY",
          "location": {
            "section": "Ring Buffer Sizing",
            "lines": "526"
          },
          "current_content": "Ring buffer: 2048 samples * 2 channels * 2 buffers = 8192 samples (~185ms @ 44.1kHz)",
          "new_content": "Ring buffer: [DBD-PARAM-030] output_ringbuffer_size (8192 samples = 185ms @ 44.1kHz)",
          "rationale": "SPEC016 is authoritative source for output ring buffer sizing.",
          "status": "READY",
          "references_to_spec016_17": ["DBD-PARAM-030"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC014-007",
          "priority": "MEDIUM",
          "type": "REMOVE_REDUNDANCY",
          "location": {
            "section": "Buffer Underrun Handling",
            "lines": "234-250"
          },
          "current_content": "[SSD-UND-010] If playback should progress to a point where no decoded audio is yet available to play:\n- Log warning\n- Pause playback until buffer available\n[...17 lines of detailed behavior...]",
          "new_content": "[SSD-UND-010] Buffer underrun detection follows [SPEC016 Buffers - DBD-BUF-040] with auto-pause/resume behavior:\n- Detection: Mixer attempts to read from empty buffer ([DBD-BUF-040])\n- Response: Auto-pause with exponential decay to flatline ([DBD-MIX-050] through [DBD-MIX-052])\n- Recovery: Auto-resume when buffer refills\n\nSee [SPEC016 Mixer - Pause Mode](SPEC016-decoder_buffer_design.md#mixer) for pause behavior specification.",
          "rationale": "SPEC016 contains authoritative buffer underrun and pause behavior. Collapse duplication to cross-reference.",
          "status": "READY",
          "references_to_spec016_17": ["DBD-BUF-040", "DBD-MIX-050", "DBD-MIX-051", "DBD-MIX-052"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC014-008",
          "priority": "MEDIUM",
          "type": "REMOVE_REDUNDANCY",
          "location": {
            "section": "Crossfade Algorithm",
            "lines": "388-420"
          },
          "current_content": "Crossfade Algorithm pseudocode:\nfor i in 0..output.len() step 2 {\n  let current_sample = current_buffer.read_sample();\n  let next_sample = next_buffer.read_sample();\n  [...30+ lines of pseudocode...]",
          "new_content": "Crossfade mixing algorithm: See [SPEC016 Mixer - DBD-MIX-040] for complete mixer implementation including:\n- Sample mixing with volume multiplication\n- Crossfade handling during overlap\n- Master volume application\n\nFor crossfade timing calculation, see [SPEC002 Crossfade Design](SPEC002-crossfade.md#implementation-algorithm).",
          "rationale": "SPEC016 mixer and SPEC002 crossfade timing are authoritative sources. Remove pseudocode duplication.",
          "status": "READY",
          "references_to_spec016_17": ["DBD-MIX-010", "DBD-MIX-040"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC014-009",
          "priority": "MEDIUM",
          "type": "REMOVE_REDUNDANCY",
          "location": {
            "section": "Performance Characteristics - Memory",
            "lines": "878-883"
          },
          "current_content": "Per passage buffer: ~5.3 MB (15 sec @ 44.1kHz stereo)\nTotal for 12 passages: ~64 MB\nOutput ring buffer: ~33 KB",
          "new_content": "See [SPEC016 Operating Parameters](SPEC016-decoder_buffer_design.md#operating-parameters) for authoritative buffer memory calculations:\n- [DBD-PARAM-070]: playout_ringbuffer_size (661941 samples, 60MB total for 12 buffers)\n- [DBD-PARAM-030]: output_ringbuffer_size (8192 samples)\n- [DBD-PARAM-080]: playout_ringbuffer_headroom (441 samples)",
          "rationale": "SPEC016 contains complete memory calculations. Remove duplication.",
          "status": "READY",
          "references_to_spec016_17": ["DBD-PARAM-030", "DBD-PARAM-070", "DBD-PARAM-080"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC014-010",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Related Documentation",
            "lines": "3",
            "requirement_id": "N/A"
          },
          "current_content": "> **Related Documentation:** [Architecture](SPEC001-architecture.md) | [Requirements](REQ001-requirements.md) | [Crossfade Design](SPEC002-crossfade.md) | [Single Stream Playback](SPEC013-single_stream_playback.md)",
          "new_content": "> **Related Documentation:** [Architecture](SPEC001-architecture.md) | [Requirements](REQ001-requirements.md) | [Crossfade Design](SPEC002-crossfade.md) | [Single Stream Playback](SPEC013-single_stream_playback.md) | [Decoder Buffer Design](SPEC016-decoder_buffer_design.md) | [Sample Rate Conversion](SPEC017-sample_rate_conversion.md)",
          "rationale": "SPEC016/SPEC017 are directly related to single-stream design",
          "status": "READY",
          "references_to_spec016_17": ["SPEC016", "SPEC017"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC014-011",
          "priority": "MEDIUM",
          "type": "CLARIFY_PARAMETER",
          "location": {
            "section": "Decoder Pool Sizing",
            "lines": "114-122"
          },
          "current_content": "Pool Sizing: Fixed pool: 2 decoder threads",
          "new_content": "**CLARIFICATION:** This section describes the original 2-thread pool design. SPEC016 specifies maximum_decode_streams = 12 ([DBD-PARAM-050]), which controls buffer allocation (not thread count). The serial decode approach ([DBD-DEC-040]) uses one decoder at a time.\n\nTerminology:\n- **Decoder threads** (2 in original design): Physical worker threads\n- **Decode streams** (12 max per SPEC016): Decoder-buffer chain allocations\n\nSee [SPEC016](SPEC016-decoder_buffer_design.md) for current authoritative design.",
          "rationale": "Resolve confusion between thread count (2) and buffer allocation limit (12)",
          "status": "READY",
          "references_to_spec016_17": ["DBD-PARAM-050", "DBD-DEC-040"],
          "implementation_impact": "NONE",
          "implementation_notes": "Clarification only; both values are correct for different purposes"
        },
        {
          "edit_id": "EDIT-SPEC014-012",
          "priority": "LOW",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Resampling",
            "lines": "142"
          },
          "current_content": "rubato - Pure Rust resampling library",
          "new_content": "rubato - Pure Rust resampling library. See [SPEC016 Resampling - DBD-RSMP-010] for resampling behavior (resample when != working_sample_rate, bypass when == working_sample_rate).",
          "rationale": "Link to authoritative resampling specification",
          "status": "READY",
          "references_to_spec016_17": ["DBD-RSMP-010", "DBD-RSMP-020"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC014-013",
          "priority": "LOW",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "PassageBuffer Structure",
            "lines": "156-180"
          },
          "current_content": "PassageBuffer structure with pcm_data: Vec<f32>, sample_rate, channels, status",
          "new_content": "PassageBuffer structure (see [SPEC016 Buffers - DBD-BUF-010] for authoritative buffer specification):\n- pcm_data: Vec<f32> - interleaved stereo samples [L, R, L, R, ...]\n- sample_rate: working_sample_rate ([DBD-PARAM-020], default 44100Hz)\n- channels: 2 (stereo)\n- status: BufferStatus (see SPEC011)\n\nBuffer lifecycle states defined in [DBD-BUF-020] through [DBD-BUF-060].",
          "rationale": "Cross-reference authoritative buffer specifications",
          "status": "READY",
          "references_to_spec016_17": ["DBD-BUF-010", "DBD-BUF-020", "DBD-PARAM-020"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC014-014",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Full Decode Strategy",
            "lines": "187-192"
          },
          "current_content": "Currently Playing or Next-to-Play Passage - Full Decode Strategy: ENTIRE passage decoded into RAM",
          "new_content": "Currently Playing or Next-to-Play Passage - Full Decode Strategy: ENTIRE passage decoded into RAM\n\nSee [SPEC016 Overview - DBD-OV-050] for complete decoder-buffer chain allocation strategy. Maximum allocation controlled by [DBD-PARAM-050] maximum_decode_streams (default: 12).",
          "rationale": "Link full/partial buffer strategy to authoritative SPEC016",
          "status": "READY",
          "references_to_spec016_17": ["DBD-OV-050", "DBD-PARAM-050"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC014-015",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Crossfade Timing Calculation",
            "lines": "500-560"
          },
          "current_content": "CrossfadeMixer owns calculation responsibility, executes Phase 3 validation",
          "new_content": "CrossfadeMixer owns calculation responsibility, executes Phase 3 validation\n\nSee [SPEC002 Crossfade Design - Implementation Algorithm](SPEC002-crossfade.md#implementation-algorithm) for complete crossfade timing calculation specification ([XFD-IMPL-010] through [XFD-IMPL-050]).\n\nMixer implementation follows [SPEC016 Mixer - DBD-MIX-040].",
          "rationale": "Link to authoritative crossfade calculation and mixer implementation",
          "status": "READY",
          "references_to_spec016_17": ["DBD-MIX-040"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC014-016",
          "priority": "LOW",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Sample-Accurate Timing",
            "lines": "803"
          },
          "current_content": "At 44.1kHz, each sample = 0.0227 ms. Crossfade timing precise to ~0.02 ms",
          "new_content": "At 44.1kHz, each sample = 0.0227 ms. Crossfade timing precise to ~0.02 ms\n\nSample-accurate timing per [SPEC016 Decoders - DBD-DEC-080]. For tick-level precision (~35.4 nanoseconds), see [SPEC017 Tick Rate - SRC-TICK-030].",
          "rationale": "Link to authoritative timing precision specifications",
          "status": "READY",
          "references_to_spec016_17": ["DBD-DEC-080", "SRC-TICK-030"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC014-017",
          "priority": "LOW",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Playback Modes",
            "lines": "1198"
          },
          "current_content": "modes: [\"playing\", \"paused\"]",
          "new_content": "modes: [\"playing\", \"paused\"] (see [SPEC016 Dataflow - DBD-FLOW-010])",
          "rationale": "Link to authoritative playback mode specification",
          "status": "READY",
          "references_to_spec016_17": ["DBD-FLOW-010"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC014-018",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Clipping Detection",
            "lines": "580-620"
          },
          "current_content": "Describes crossfade summation clipping detection",
          "new_content": "Crossfade Summation Clipping Detection\n\nSee [SPEC002 Clipping Prevention](SPEC002-crossfade.md#clipping-prevention) for policy:\n- [XFD-VOL-030]: No runtime clipping prevention\n- [XFD-VOL-040]: UI warning during editing when amplitude >50%\n\nMixer implementation follows [SPEC016 Mixer - DBD-MIX-040].",
          "rationale": "Link to authoritative clipping prevention policy",
          "status": "READY",
          "references_to_spec016_17": ["DBD-MIX-040"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        }
      ]
    },

    {
      "document": "SPEC013-single_stream_playback.md",
      "tier": 2,
      "total_edits": 18,
      "priority_breakdown": {"HIGH": 8, "MEDIUM": 7, "LOW": 3},
      "estimated_line_reduction": 120,
      "summary": "High-level overview with overlapping SPEC016 content. Should become gateway to SPEC016 details.",

      "edits": [
        {
          "edit_id": "EDIT-SPEC013-001",
          "priority": "HIGH",
          "type": "ADD_DEPRECATION",
          "location": {
            "section": "Document Header",
            "lines": "1-10"
          },
          "current_content": "# Single Stream Playback Architecture\n\n**TIER 2 - DESIGN SPECIFICATION**",
          "new_content": "# Single Stream Playback Architecture\n\n**TIER 2 - DESIGN SPECIFICATION**\n\n> **NOTE:** This document provides a high-level overview of the single-stream playback architecture. For detailed decoder-buffer-mixer design, see:\n> - [SPEC016 Decoder Buffer Design](SPEC016-decoder_buffer_design.md) - Authoritative decoder-buffer-mixer specification\n> - [SPEC017 Sample Rate Conversion](SPEC017-sample_rate_conversion.md) - Tick-based timing system\n> - [SPEC014 Single Stream Design](SPEC014-single_stream_design.md) - Implementation details",
          "rationale": "Establish SPEC016 as authoritative source upfront",
          "status": "READY",
          "references_to_spec016_17": ["SPEC016", "SPEC017"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC013-002",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Related Documentation",
            "lines": "3"
          },
          "current_content": "> **Related Documentation:** [Architecture](SPEC001-architecture.md) | [Crossfade Design](SPEC002-crossfade.md)",
          "new_content": "> **Related Documentation:** [Architecture](SPEC001-architecture.md) | [Crossfade Design](SPEC002-crossfade.md) | [Decoder Buffer Design](SPEC016-decoder_buffer_design.md) | [Sample Rate Conversion](SPEC017-sample_rate_conversion.md)",
          "rationale": "Add SPEC016/SPEC017 to related documentation",
          "status": "READY",
          "references_to_spec016_17": ["SPEC016", "SPEC017"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC013-003",
          "priority": "MEDIUM",
          "type": "REMOVE_REDUNDANCY",
          "location": {
            "section": "Audio Decoder - Resample",
            "lines": "99"
          },
          "current_content": "Resample to standard rate (44.1kHz) if needed using rubato",
          "new_content": "Resample to working_sample_rate ([SPEC016 DBD-PARAM-020], default: 44.1kHz) if needed using rubato. See [SPEC016 Resampling - DBD-RSMP-010].",
          "rationale": "Replace hardcoded 44.1kHz with reference to authoritative parameter",
          "status": "READY",
          "references_to_spec016_17": ["DBD-PARAM-020", "DBD-RSMP-010"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC013-004",
          "priority": "HIGH",
          "type": "REMOVE_REDUNDANCY",
          "location": {
            "section": "Passage Buffer Manager",
            "lines": "110-130"
          },
          "current_content": "PassageBuffer key features:\n- PCM audio storage (interleaved stereo f32: [L, R, L, R, ...])\n- Automatic fade application during read_sample()\n- Memory usage:\n  - 1 second audio @ 44.1kHz stereo = ~353 KB\n  - 15 second buffer = ~5.3 MB",
          "new_content": "PassageBuffer key features (see [SPEC016 Buffers - DBD-BUF-010] for complete specification):\n- PCM audio storage (interleaved stereo f32: [L, R, L, R, ...])\n- Fade application during decode (pre-buffer) per [DBD-FADE-030]\n- Buffer sizing: [DBD-PARAM-070] playout_ringbuffer_size (661941 samples = 15.01s @ 44.1kHz, 60MB total for 12 buffers)",
          "rationale": "Remove memory calculation duplication, reference SPEC016 as authoritative source",
          "status": "READY",
          "references_to_spec016_17": ["DBD-BUF-010", "DBD-FADE-030", "DBD-PARAM-070"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC013-005",
          "priority": "HIGH",
          "type": "ADD_DEPRECATION",
          "location": {
            "section": "Crossfade Mixer",
            "lines": "280"
          },
          "current_content": "## Crossfade Mixer\n\nThe CrossfadeMixer manages mixing of overlapping passages...",
          "new_content": "## Crossfade Mixer\n\n> **NOTE:** [SPEC016 Decoder Buffer Design - Mixer](SPEC016-decoder_buffer_design.md#mixer) now provides the authoritative mixer specification ([DBD-MIX-010] through [DBD-MIX-052]).\n\nThe CrossfadeMixer manages mixing of overlapping passages...",
          "rationale": "Acknowledge SPEC016 as authoritative mixer source",
          "status": "READY",
          "references_to_spec016_17": ["DBD-MIX-010", "DBD-MIX-040"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC013-006",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Crossfade Algorithm",
            "lines": "200-230"
          },
          "current_content": "Crossfade Algorithm:\nFor each sample pair:\n1. Read current passage sample\n2. Read next passage sample\n3. Apply fade curves\n4. Sum weighted samples\n5. Apply master volume",
          "new_content": "Crossfade Algorithm (see [SPEC016 Mixer - DBD-MIX-040] for implementation):\nFor each sample pair:\n1. Read current passage sample\n2. Read next passage sample\n3. Apply fade curves\n4. Sum weighted samples\n5. Apply master volume\n\nFor crossfade timing calculation, see [SPEC002 Crossfade Design](SPEC002-crossfade.md#implementation-algorithm).",
          "rationale": "Link to authoritative mixer implementation and crossfade timing",
          "status": "READY",
          "references_to_spec016_17": ["DBD-MIX-040"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC013-007",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Sample-Accurate Timing",
            "lines": "347"
          },
          "current_content": "At 44.1kHz, each sample = 0.0227 ms. Crossfade timing precise to ~0.02 ms",
          "new_content": "At 44.1kHz, each sample = 0.0227 ms. Crossfade timing precise to ~0.02 ms\n\nSample-accurate timing per [SPEC016 Decoders - DBD-DEC-080]. For tick-level precision (~35.4 nanoseconds), see [SPEC017 Tick Rate - SRC-TICK-030].",
          "rationale": "Link to authoritative timing precision specifications",
          "status": "READY",
          "references_to_spec016_17": ["DBD-DEC-080", "SRC-TICK-030"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC013-008",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Performance Characteristics",
            "lines": "400-450"
          },
          "current_content": "Buffer sizes, memory calculations, latency discussion",
          "new_content": "Performance Characteristics\n\nSee [SPEC016 Operating Parameters](SPEC016-decoder_buffer_design.md#operating-parameters) for authoritative buffer sizing:\n- [DBD-PARAM-030] output_ringbuffer_size (8192 samples = 185ms)\n- [DBD-PARAM-070] playout_ringbuffer_size (661941 samples = 15.01s, 60MB for 12 buffers)\n- [DBD-PARAM-080] playout_ringbuffer_headroom (441 samples)\n\nLatency:\n- Decode latency: Variable (depends on file format and decode speed)\n- Crossfade latency: ~0.02ms (sample-accurate per [DBD-DEC-080])\n- Output latency: ~185ms (output ring buffer per [DBD-PARAM-030])",
          "rationale": "Replace scattered performance info with references to authoritative parameters",
          "status": "READY",
          "references_to_spec016_17": ["DBD-PARAM-030", "DBD-PARAM-070", "DBD-PARAM-080", "DBD-DEC-080"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC013-009",
          "priority": "LOW",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Technology Stack",
            "lines": "82-84"
          },
          "current_content": "symphonia 0.5.x: Pure Rust audio decoder\nrubato 0.15.x: High-quality sample rate conversion",
          "new_content": "symphonia 0.5.x: Pure Rust audio decoder (see [SPEC016 Sample Format - DBD-FMT-020])\nrubato 0.15.x: High-quality sample rate conversion (see [SPEC016 Resampling - DBD-RSMP-010])",
          "rationale": "Link technology stack to usage specifications",
          "status": "READY",
          "references_to_spec016_17": ["DBD-FMT-020", "DBD-RSMP-010"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC013-010",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Fade Curve Algorithms",
            "lines": "500-600"
          },
          "current_content": "Describes implementation of five fade curves (Linear, Exponential, Logarithmic, Cosine, Equal-Power)",
          "new_content": "Fade Curve Algorithms\n\nSee [SPEC002 Volume Fade Curve Formulas](SPEC002-crossfade.md#volume-fade-curve-formulas) for authoritative fade curve definitions ([XFD-IMPL-091] through [XFD-IMPL-096]).\n\nImplementation location: [SPEC016 Fade In/Out handlers - DBD-FADE-010].\n\nSupported curves:\n- Linear\n- Exponential (fade-in)\n- Logarithmic (fade-out)\n- Cosine\n- Equal-Power",
          "rationale": "Link to authoritative fade curve definitions in SPEC002",
          "status": "READY",
          "references_to_spec016_17": ["DBD-FADE-010"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC013-011",
          "priority": "HIGH",
          "type": "ADD_DEPRECATION",
          "location": {
            "section": "Decoder Thread Pool",
            "lines": "30-50"
          },
          "current_content": "Component diagram shows decoder thread pool (3 parallel decoders)",
          "new_content": "Component diagram shows decoder thread pool (3 parallel decoders)\n\n> **NOTE:** SPEC016 specifies serial decoding (one decoder at a time, [DBD-DEC-040]) rather than parallel thread pool for improved cache coherency. See [SPEC016 Decoders](SPEC016-decoder_buffer_design.md#decoders) for authoritative decoder strategy.",
          "rationale": "Flag discrepancy between thread pool (old) and serial decode (new)",
          "status": "READY",
          "references_to_spec016_17": ["DBD-DEC-040"],
          "implementation_impact": "MAJOR",
          "implementation_notes": "Diagram shows old design; SPEC016 specifies new approach"
        }
      ]
    },

    {
      "document": "SPEC002-crossfade.md",
      "tier": 2,
      "total_edits": 14,
      "priority_breakdown": {"HIGH": 5, "MEDIUM": 6, "LOW": 3},
      "estimated_line_reduction": 0,
      "summary": "Add references to SPEC016 mixer implementation and SPEC017 tick timing. Critical discrepancies with tick storage.",

      "edits": [
        {
          "edit_id": "EDIT-SPEC002-001",
          "priority": "HIGH",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Implementation Algorithm",
            "lines": "243"
          },
          "current_content": "[XFD-IMPL-020] Pseudocode section ends",
          "new_content": "[XFD-IMPL-020] Pseudocode section ends\n\nSee [SPEC016 Decoder Buffer Design - Mixer](SPEC016-decoder_buffer_design.md#mixer) for implementation of crossfade mixing with overlapping passages ([DBD-MIX-040]).",
          "rationale": "SPEC016 defines HOW mixer implements crossfade overlap; SPEC002 defines WHEN overlap occurs",
          "status": "READY",
          "references_to_spec016_17": ["DBD-MIX-040"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC002-002",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Queue Entry Timing Specification",
            "lines": "980"
          },
          "current_content": "[XFD-QUEUE-030] Timing values as unsigned integer milliseconds",
          "new_content": "[XFD-QUEUE-030] Timing values as unsigned integer milliseconds\n\nSee [SPEC017 Sample Rate Conversion - API Representation](SPEC017-sample_rate_conversion.md#api-representation) for conversion between milliseconds (API) and ticks (internal storage, [SRC-API-020]: ms * 28224).",
          "rationale": "SPEC017 defines authoritative milliseconds-to-ticks conversion",
          "status": "READY",
          "references_to_spec016_17": ["SRC-API-020", "SRC-API-030"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC002-003",
          "priority": "CRITICAL",
          "type": "ALIGN_WITH_NEW_DESIGN",
          "location": {
            "section": "Database Storage",
            "lines": "1025-1033"
          },
          "current_content": "[XFD-DB-010] Timing points stored as seconds (REAL, nullable) in passages table",
          "new_content": "[XFD-DB-010] **CORRECTION:** Database stores timing as INTEGER ticks, not seconds.\n\nSee [SPEC017 Database Storage](SPEC017-sample_rate_conversion.md#database-storage) for tick-based storage format:\n- [SRC-DB-011]: start_time_ticks (INTEGER NOT NULL)\n- [SRC-DB-012]: fade_in_start_ticks (INTEGER)\n- [SRC-DB-013]: lead_in_start_ticks (INTEGER)\n- [SRC-DB-014]: lead_out_start_ticks (INTEGER)\n- [SRC-DB-015]: fade_out_start_ticks (INTEGER)\n- [SRC-DB-016]: end_time_ticks (INTEGER NOT NULL)\n\nConversion: ticks = seconds * 28,224,000 ([SRC-TICK-020])",
          "rationale": "SPEC002 contains INCORRECT information; SPEC017 specifies tick-based storage",
          "status": "BLOCKED_ON_T1_APPROVAL",
          "references_to_spec016_17": ["SRC-DB-011", "SRC-DB-012", "SRC-DB-013", "SRC-DB-014", "SRC-DB-015", "SRC-DB-016", "SRC-TICK-020"],
          "implementation_impact": "MAJOR",
          "implementation_notes": "BLOCKED: Tick-based database storage requires Tier 1 approval for schema change"
        },
        {
          "edit_id": "EDIT-SPEC002-004",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Volume Calculations",
            "lines": "785"
          },
          "current_content": "[XFD-VOL-010] Final Output = (Passage A Audio × A Volume) + (Passage B Audio × B Volume)",
          "new_content": "[XFD-VOL-010] Final Output = (Passage A Audio × A Volume) + (Passage B Audio × B Volume)\n\nSee [SPEC016 Mixer](SPEC016-decoder_buffer_design.md#mixer) for implementation details of volume mixing during crossfade ([DBD-MIX-040]).",
          "rationale": "SPEC016 mixer implements this exact calculation",
          "status": "READY",
          "references_to_spec016_17": ["DBD-MIX-040"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC002-005",
          "priority": "LOW",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Volume Fade Update Frequency",
            "lines": "661"
          },
          "current_content": "[Configuration] volume_fade_update_period (default 10ms)",
          "new_content": "[Configuration] volume_fade_update_period (default 10ms)\n\nNote: This is distinct from [SPEC016 DBD-PARAM-040] output_refill_period (90ms), which controls mixer-to-output ring buffer fills. Volume updates occur more frequently for smooth fade curves.",
          "rationale": "Clarify relationship between two different timing parameters",
          "status": "READY",
          "references_to_spec016_17": ["DBD-PARAM-040"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC002-006",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Pause and Resume Behavior",
            "lines": "685"
          },
          "current_content": "[XFD-PAUS-010] Pause (immediate) and resume (fade-in) behavior",
          "new_content": "[XFD-PAUS-010] Pause (immediate) and resume (fade-in) behavior\n\nSee [SPEC016 Mixer - Pause Mode](SPEC016-decoder_buffer_design.md#mixer) for mixer implementation of pause behavior:\n- [DBD-MIX-050]: Exponential decay output during pause\n- [DBD-MIX-051]: pause_decay_factor ([DBD-PARAM-090], default 0.9999)\n- [DBD-MIX-052]: pause_decay_floor ([DBD-PARAM-100], default 0.0001)",
          "rationale": "SPEC002 defines pause behavior; SPEC016 implements it with specific parameters",
          "status": "READY",
          "references_to_spec016_17": ["DBD-MIX-050", "DBD-MIX-051", "DBD-MIX-052", "DBD-PARAM-090", "DBD-PARAM-100"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC002-007",
          "priority": "CRITICAL",
          "type": "ALIGN_WITH_NEW_DESIGN",
          "location": {
            "section": "Implementation Notes - Timing Precision",
            "lines": "764-773"
          },
          "current_content": "[XFD-IMPL-140] Timing precision: All calculations use floating-point seconds",
          "new_content": "[XFD-IMPL-140] **CORRECTION:** Timing precision uses tick-based representation (not floating-point seconds).\n\nSee [SPEC017 Problem Statement](SPEC017-sample_rate_conversion.md#problem-statement):\n- [SRC-PROB-020]: Floating-point seconds introduce cumulative rounding errors\n- [SRC-SOL-010]: Use i64 ticks for lossless precision\n- [SRC-TICK-020]: tick_rate = 28,224,000 Hz (LCM of common sample rates)\n- [SRC-TICK-030]: One tick ≈ 35.4 nanoseconds\n\nInternal timing uses ticks; floating-point may be used for logging/display only.",
          "rationale": "SPEC017 specifies tick-based timing to avoid floating-point rounding errors",
          "status": "BLOCKED_ON_T1_APPROVAL",
          "references_to_spec016_17": ["SRC-PROB-020", "SRC-SOL-010", "SRC-TICK-020", "SRC-TICK-030"],
          "implementation_impact": "MAJOR",
          "implementation_notes": "BLOCKED: Crossfade timing implementation must use ticks instead of floating-point"
        },
        {
          "edit_id": "EDIT-SPEC002-008",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Timing Point Definitions",
            "lines": "80"
          },
          "current_content": "End of Point Definitions section",
          "new_content": "End of Point Definitions section\n\n**Database storage:** All timing points stored as INTEGER ticks (not seconds). See [SPEC017 Database Storage](SPEC017-sample_rate_conversion.md#database-storage) for field definitions ([SRC-DB-011] through [SRC-DB-016]).",
          "rationale": "Timing points section should acknowledge database storage format",
          "status": "BLOCKED_ON_T1_APPROVAL",
          "references_to_spec016_17": ["SRC-DB-011", "SRC-DB-012", "SRC-DB-013", "SRC-DB-014", "SRC-DB-015", "SRC-DB-016"],
          "implementation_impact": "NONE",
          "implementation_notes": "BLOCKED: References tick storage pending Tier 1 approval"
        },
        {
          "edit_id": "EDIT-SPEC002-009",
          "priority": "LOW",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Fade Behavior During Crossfade",
            "lines": "778"
          },
          "current_content": "[XFD-FADE-010] Fades operate independently of crossfade overlap",
          "new_content": "[XFD-FADE-010] Fades operate independently of crossfade overlap\n\nSee [SPEC016 Fade In/Out handlers](SPEC016-decoder_buffer_design.md#fade-inout-handlers) for fade curve application implementation:\n- [DBD-FADE-030]: Fade-in curve application\n- [DBD-FADE-050]: Fade-out curve application",
          "rationale": "SPEC002 defines fade behavior; SPEC016 implements it",
          "status": "READY",
          "references_to_spec016_17": ["DBD-FADE-030", "DBD-FADE-050"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC002-010",
          "priority": "LOW",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Pre-Loading Strategy",
            "lines": "467"
          },
          "current_content": "[XFD-IMPL-070] Pre-load buffer time (5 seconds before crossfade)",
          "new_content": "[XFD-IMPL-070] Pre-load buffer time (5 seconds before crossfade)\n\nNote: 5-second pre-load buffer is 1/3 of [SPEC016 DBD-PARAM-070] playout_ringbuffer_size (15.01 seconds @ 44.1kHz). See [SPEC016 Operating Parameters](SPEC016-decoder_buffer_design.md#operating-parameters).",
          "rationale": "Pre-load timing related to buffer size parameter",
          "status": "READY",
          "references_to_spec016_17": ["DBD-PARAM-070"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC002-011",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Related Documentation",
            "lines": "7"
          },
          "current_content": "> **Related Documentation:** [Architecture](SPEC001-architecture.md) | [Single Stream Playback](SPEC013-single_stream_playback.md) | [Single Stream Design](SPEC014-single_stream_design.md)",
          "new_content": "> **Related Documentation:** [Architecture](SPEC001-architecture.md) | [Single Stream Playback](SPEC013-single_stream_playback.md) | [Single Stream Design](SPEC014-single_stream_design.md) | [Decoder Buffer Design](SPEC016-decoder_buffer_design.md) | [Sample Rate Conversion](SPEC017-sample_rate_conversion.md)",
          "rationale": "Add SPEC016/SPEC017 to related documentation",
          "status": "READY",
          "references_to_spec016_17": ["SPEC016", "SPEC017"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        }
      ]
    },

    {
      "document": "IMPL001-database_schema.md",
      "tier": 3,
      "total_edits": 8,
      "priority_breakdown": {"HIGH": 3, "MEDIUM": 3, "LOW": 2},
      "estimated_line_reduction": 0,
      "summary": "Critical: Update passages table timing fields to INTEGER ticks (BLOCKED on Tier 1). Add parameter references.",

      "edits": [
        {
          "edit_id": "EDIT-IMPL001-001",
          "priority": "CRITICAL",
          "type": "ALIGN_WITH_NEW_DESIGN",
          "location": {
            "section": "Passages table",
            "lines": "143-176"
          },
          "current_content": "start_time (REAL, NOT NULL) - Passage start in seconds\nfade_in_start (REAL) - Fade-in start in seconds\nlead_in_start (REAL) - Lead-in start in seconds\nlead_out_start (REAL) - Lead-out start in seconds\nfade_out_start (REAL) - Fade-out start in seconds\nend_time (REAL, NOT NULL) - Passage end in seconds",
          "new_content": "**CRITICAL DISCREPANCY:** SPEC017 specifies timing fields as INTEGER ticks ([SRC-DB-011] through [SRC-DB-016]), not REAL seconds.\n\n**Corrected schema (pending Tier 1 approval):**\n\nstart_time_ticks (INTEGER, NOT NULL) - Passage start ([SRC-DB-011])\nfade_in_start_ticks (INTEGER) - Fade-in start ([SRC-DB-012])\nlead_in_start_ticks (INTEGER) - Lead-in start ([SRC-DB-013])\nlead_out_start_ticks (INTEGER) - Lead-out start ([SRC-DB-014])\nfade_out_start_ticks (INTEGER) - Fade-out start ([SRC-DB-015])\nend_time_ticks (INTEGER, NOT NULL) - Passage end ([SRC-DB-016])\n\nConversion: ticks = seconds * 28,224,000 ([SPEC017 SRC-TICK-020])\n\nSee [SPEC017 Database Storage](SPEC017-sample_rate_conversion.md#database-storage).",
          "rationale": "Database schema must match SPEC017 tick-based storage format",
          "status": "BLOCKED_ON_T1_APPROVAL",
          "references_to_spec016_17": ["SRC-DB-011", "SRC-DB-012", "SRC-DB-013", "SRC-DB-014", "SRC-DB-015", "SRC-DB-016", "SRC-TICK-020"],
          "implementation_impact": "MAJOR",
          "implementation_notes": "BLOCKED: Database schema change requires Tier 1 approval and migration"
        },
        {
          "edit_id": "EDIT-IMPL001-002",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Settings Table - Audio Configuration",
            "lines": "750-770"
          },
          "current_content": "volume_level (REAL) - Master volume 0.0-1.0\naudio_sink (TEXT) - Audio output device",
          "new_content": "volume_level (REAL) - Master volume 0.0-1.0\naudio_sink (TEXT) - Audio output device\n\nSee [SPEC016 Operating Parameters](SPEC016-decoder_buffer_design.md#operating-parameters) for complete audio player operating parameter definitions ([DBD-PARAM-010] through [DBD-PARAM-100]).",
          "rationale": "IMPL001 should cite SPEC016 for parameter definitions",
          "status": "READY",
          "references_to_spec016_17": ["DBD-PARAM-010"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-IMPL001-003",
          "priority": "LOW",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Settings Table - Event Timing Configuration",
            "lines": "750-900"
          },
          "current_content": "position_event_interval_ms (INTEGER)\nplayback_progress_interval_ms (INTEGER)",
          "new_content": "position_event_interval_ms (INTEGER)\nplayback_progress_interval_ms (INTEGER)\n\nNote: These event intervals are distinct from [SPEC016 DBD-PARAM-040] output_refill_period (90ms) which controls mixer-to-output buffer refills. See [SPEC016 Operating Parameters](SPEC016-decoder_buffer_design.md#operating-parameters).",
          "rationale": "Clarify relationship between different timing parameters",
          "status": "READY",
          "references_to_spec016_17": ["DBD-PARAM-040"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-IMPL001-004",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Passages table - fade curves",
            "lines": "156-157"
          },
          "current_content": "fade_in_curve (TEXT) - Fade-in curve type\nfade_out_curve (TEXT) - Fade-out curve type",
          "new_content": "fade_in_curve (TEXT) - Fade-in curve type (see [SPEC002 XFD-CURV-020]: exponential, cosine, linear)\nfade_out_curve (TEXT) - Fade-out curve type (see [SPEC002 XFD-CURV-030]: logarithmic, cosine, linear)\n\nSee [SPEC002 Fade Curves](SPEC002-crossfade.md#fade-curves) for curve definitions.",
          "rationale": "Database schema should reference SPEC002 for valid enum values",
          "status": "READY",
          "references_to_spec016_17": [],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change (references SPEC002, not SPEC016)"
        }
      ]
    },

    {
      "document": "SPEC001-architecture.md",
      "tier": 2,
      "total_edits": 10,
      "priority_breakdown": {"HIGH": 3, "MEDIUM": 5, "LOW": 2},
      "estimated_line_reduction": 0,
      "summary": "Add deep links from architecture overview to SPEC016 detailed design.",

      "edits": [
        {
          "edit_id": "EDIT-SPEC001-001",
          "priority": "HIGH",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Audio Player Responsibilities",
            "lines": "120"
          },
          "current_content": "[ARCH-PC-010] Audio Player responsibilities: decoding, buffering, crossfading, output",
          "new_content": "[ARCH-PC-010] Audio Player responsibilities: decoding, buffering, crossfading, output\n\nSee [SPEC016 Decoder Buffer Design](SPEC016-decoder_buffer_design.md) for complete audio player architecture including decoder-buffer chains, mixer, and output system.",
          "rationale": "SPEC001 overview should deep-link to SPEC016 detailed design",
          "status": "READY",
          "references_to_spec016_17": ["DBD-OV-010"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC001-002",
          "priority": "LOW",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Audio Player Responsibilities - Sample-accurate crossfading",
            "lines": "112"
          },
          "current_content": "sample-accurate crossfading (~0.02ms precision)",
          "new_content": "sample-accurate crossfading (~0.02ms precision)\n\nNote: 0.02ms represents sample-level precision at 44.1kHz ([SPEC016 DBD-DEC-080]). For tick-level precision (~35.4 nanoseconds), see [SPEC017 Tick Rate - SRC-TICK-030].",
          "rationale": "Clarify precision claim; 0.02ms is sample precision, not tick precision",
          "status": "READY",
          "references_to_spec016_17": ["DBD-DEC-080", "SRC-TICK-030"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC001-003",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Song Boundary Detection",
            "lines": "373"
          },
          "current_content": "[ARCH-SNGC-030] position_event_interval_ms configuration (default 1000ms)",
          "new_content": "[ARCH-SNGC-030] position_event_interval_ms configuration (default 1000ms)\n\nSee [IMPL001 Database Schema - Settings Table](IMPL001-database_schema.md#settings-table) for position_event_interval_ms and playback_progress_interval_ms configuration.",
          "rationale": "Link architecture behavior to database configuration",
          "status": "READY",
          "references_to_spec016_17": [],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC001-004",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Component Implementation Details",
            "lines": "1177"
          },
          "current_content": "Lists related design specifications",
          "new_content": "Component Implementation Details:\n\n- **Audio Player Architecture**: See [Decoder Buffer Design](SPEC016-decoder_buffer_design.md)\n- **Timing Precision**: See [Sample Rate Conversion](SPEC017-sample_rate_conversion.md)\n- **Crossfade Design**: See [Crossfade Design](SPEC002-crossfade.md)\n- **Single-Stream Playback**: See [Single Stream Playback](SPEC013-single_stream_playback.md), [Single Stream Design](SPEC014-single_stream_design.md)",
          "rationale": "Architecture overview should list SPEC016/SPEC017 as core design specs",
          "status": "READY",
          "references_to_spec016_17": ["SPEC016", "SPEC017"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC001-005",
          "priority": "LOW",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Audio Output",
            "lines": "120"
          },
          "current_content": "cpal for cross-platform audio output",
          "new_content": "cpal for cross-platform audio output\n\nSee [SPEC016 Output](SPEC016-decoder_buffer_design.md#output) for output ring buffer specification:\n- [DBD-OUT-010]: Output ring buffer architecture\n- [DBD-PARAM-030]: 8192 samples (185ms @ 44.1kHz)\n- [DBD-PARAM-040]: 90ms refill period",
          "rationale": "Architecture should reference output system details",
          "status": "READY",
          "references_to_spec016_17": ["DBD-OUT-010", "DBD-PARAM-030", "DBD-PARAM-040"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC001-006",
          "priority": "LOW",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Volume Handling",
            "lines": "541"
          },
          "current_content": "[ARCH-VOL-010] Volume scale 0.0-1.0 for all systems",
          "new_content": "[ARCH-VOL-010] Volume scale 0.0-1.0 for all systems\n\nSee [SPEC016 Mixer - DBD-MIX-040] for volume application in mixer (multiply sample values by master volume).",
          "rationale": "Architecture volume spec should reference mixer implementation",
          "status": "READY",
          "references_to_spec016_17": ["DBD-MIX-040"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC001-007",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Internal Components - Audio Player",
            "lines": "844"
          },
          "current_content": "Crossfade Mixer component",
          "new_content": "Crossfade Mixer component (see [SPEC016 Mixer - DBD-MIX-010] through [DBD-MIX-052] for complete specification)",
          "rationale": "Architecture component list should reference detailed spec",
          "status": "READY",
          "references_to_spec016_17": ["DBD-MIX-010", "DBD-MIX-052"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        }
      ]
    },

    {
      "document": "SPEC016-decoder_buffer_design.md",
      "tier": 2,
      "total_edits": 15,
      "priority_breakdown": {"HIGH": 3, "MEDIUM": 8, "LOW": 4},
      "estimated_line_reduction": 0,
      "summary": "Add missing buffer strategy sections, event integration, and bidirectional references to SPEC013/SPEC014/SPEC002.",

      "edits": [
        {
          "edit_id": "EDIT-SPEC016-001",
          "priority": "CRITICAL",
          "type": "ALIGN_WITH_NEW_DESIGN",
          "location": {
            "section": "New section after Buffers",
            "lines": "After line 219"
          },
          "current_content": "[DBD-BUF-060] ends Buffers section",
          "new_content": "### Buffer Strategies\n\n**[DBD-BUF-070]** Full decode strategy (current/next passages): ENTIRE passage decoded into RAM. This ensures instant playback and seamless crossfades.\n\nApplies to:\n- Currently playing passage (queue position 0)\n- Next-to-play passage (queue position 1)\n\nSee [SPEC014 Full Buffer Strategy - SSD-FBUF-010] for implementation details.\n\n**[DBD-BUF-080]** Partial decode strategy (queued passages): Decode first 15 seconds only (default [DBD-PARAM-070] playout_ringbuffer_size).\n\nApplies to:\n- Queued passages beyond next-to-play (queue positions 2+)\n- Up to maximum_decode_streams total ([DBD-PARAM-050], default 12)\n\nRationale:\n- Optimizes memory usage (don't fully decode entire 30-song queue)\n- Enables instant skip-ahead with partial buffers\n- Decoder continues incrementally filling if passage promoted\n\nSee [SPEC014 Partial Buffer Strategy - SSD-PBUF-010] for implementation details.\n\n**[DBD-BUF-090]** Minimum playback threshold: 3 seconds. Partial buffers must reach minimum threshold before playback can start.\n\nSee [SPEC014 SSD-PBUF-028] for threshold specification.\n\n**[DBD-BUF-100]** Incremental buffer filling: Decoder fills partial buffers in 1-second chunks to prevent blocking.\n\nSee [SPEC014 Incremental Buffer Filling] and [REV004 Fix 2: Partial Buffer Playback].",
          "rationale": "SPEC016 missing critical buffer strategy documentation that exists in SPEC014",
          "status": "READY",
          "references_to_spec016_17": ["DBD-PARAM-050", "DBD-PARAM-070"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation gap; feature already specified in SPEC014"
        },
        {
          "edit_id": "EDIT-SPEC016-002",
          "priority": "MEDIUM",
          "type": "ALIGN_WITH_NEW_DESIGN",
          "location": {
            "section": "New requirement after DBD-BUF-060",
            "lines": "After line 219"
          },
          "current_content": "[DBD-BUF-060] ends Buffers section",
          "new_content": "### Buffer Events\n\n**[DBD-BUF-110]** Buffer manager emits BufferStateChanged events (see [SPEC011 Event System](SPEC011-event_system.md)) at each state transition:\n\n- **None → Decoding**: When decoder starts filling buffer\n- **Decoding → Ready**: When decode completes (full buffer) or reaches minimum threshold (partial buffer)\n- **Ready → Playing**: When mixer starts reading from buffer\n- **Playing → Exhausted**: When position reaches total_frames\n\nSee [SPEC014 Buffer Lifecycle - SSD-BUF-020] for state machine details.",
          "rationale": "Event integration critical for UI updates and debugging; specified in SPEC011/SPEC014",
          "status": "READY",
          "references_to_spec016_17": [],
          "implementation_impact": "NONE",
          "implementation_notes": "Event system already specified elsewhere; SPEC016 needs cross-reference"
        },
        {
          "edit_id": "EDIT-SPEC016-003",
          "priority": "MEDIUM",
          "type": "CLARIFY_PARAMETER",
          "location": {
            "section": "DBD-PARAM-050",
            "lines": "104-107"
          },
          "current_content": "[DBD-PARAM-050] maximum_decode_streams determines the maximum number of audio decoders that will operate on passages in the queue. Default value: 12.",
          "new_content": "[DBD-PARAM-050] maximum_decode_streams determines how many decoder-buffer chains can exist simultaneously (default: 12). This controls buffer allocation (memory limit).\n\nNote: Actual decoder execution uses serial decode per [DBD-DEC-040] (one decoder at a time). This parameter limits the number of buffers allocated, not concurrent execution threads.\n\nRelated: [SPEC014 SSD-DEC-030] describes original 2-thread pool design; serial decode is the improved approach.",
          "rationale": "Clarify that maximum_decode_streams is buffer allocation limit, not thread count",
          "status": "READY",
          "references_to_spec016_17": ["DBD-DEC-040"],
          "implementation_impact": "NONE",
          "implementation_notes": "Terminology clarification; no functional change"
        },
        {
          "edit_id": "EDIT-SPEC016-004",
          "priority": "MEDIUM",
          "type": "ALIGN_WITH_NEW_DESIGN",
          "location": {
            "section": "DBD-PARAM-060",
            "lines": "111-117"
          },
          "current_content": "[DBD-PARAM-060] decode_work_period: The number of wall clock milliseconds between decode job priority evaluation. Default value: 5000ms.",
          "new_content": "[DBD-PARAM-060] **ALTERNATIVE DESIGN:** Priority queue with continuous processing.\n\nOriginal design: Time-based switching every 5 seconds (decode_work_period).\n\nImproved design: Decoder processes priority queue continuously. When current decode job completes or buffer fills, immediately dequeue next highest-priority job. See [SPEC014 SSD-DEC-032] for priority queue implementation.\n\nBenefits:\n- Simpler scheduling logic (no timers)\n- Decoder completes current job before switching\n- Priority enforced at job boundaries, not arbitrary time intervals\n- Immediate response to priority changes when current decode finishes",
          "rationale": "SPEC014 priority queue approach simpler than time-based switching",
          "status": "READY",
          "references_to_spec016_17": [],
          "implementation_impact": "MINOR",
          "implementation_notes": "Need to verify which approach is implemented"
        },
        {
          "edit_id": "EDIT-SPEC016-005",
          "priority": "LOW",
          "type": "ADD_CLARIFICATION",
          "location": {
            "section": "DBD-OV-040",
            "lines": "After line 58"
          },
          "current_content": "Logical processing pipeline diagram",
          "new_content": "Logical processing pipeline diagram\n\nNote: This diagram shows logical processing stages. In the implemented architecture (see [SPEC014 Single Stream Design](SPEC014-single_stream_design.md)), Decoder, Resampler, and Fade Handler are all performed within DecoderPool worker threads. See [SPEC013 Single Stream Playback](SPEC013-single_stream_playback.md) and [SPEC014](SPEC014-single_stream_design.md) for component-level architecture.",
          "rationale": "Clarify logical vs physical architecture views",
          "status": "READY",
          "references_to_spec016_17": [],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation clarification; both views valid at different levels"
        },
        {
          "edit_id": "EDIT-SPEC016-006",
          "priority": "MEDIUM",
          "type": "ALIGN_WITH_NEW_DESIGN",
          "location": {
            "section": "DBD-BUF-060",
            "lines": "219"
          },
          "current_content": "[DBD-BUF-060] When mixer position reaches end time, buffer is exhausted and informs queue",
          "new_content": "[DBD-BUF-060] When mixer position reaches total_frames (set when decoder marks buffer as complete), buffer is exhausted and informs queue.\n\nThis sentinel-based approach prevents race conditions with incremental buffer filling. See [SPEC015 Playback Completion Fixes - PCF-COMP-010] for race condition fix using explicit decode_complete flag + total_frames field.",
          "rationale": "SPEC015 documents fix for buffer completion race condition",
          "status": "READY",
          "references_to_spec016_17": [],
          "implementation_impact": "NONE",
          "implementation_notes": "SPEC015 already documents the fix; SPEC016 just needs to reference it"
        },
        {
          "edit_id": "EDIT-SPEC016-007",
          "priority": "LOW",
          "type": "ADD_GLOSSARY",
          "location": {
            "section": "After Overview section",
            "lines": "After line 67"
          },
          "current_content": "End of Overview section",
          "new_content": "### Terminology\n\n**Decoder-buffer chain** (design concept) = **PassageBuffer** (core data structure) wrapped in **ManagedBuffer** (lifecycle management).\n\nSee [SPEC013 Single Stream Playback](SPEC013-single_stream_playback.md) and [REV004 Incremental Buffer Implementation](REV004-incremental_buffer_implementation.md) for implementation details.",
          "rationale": "Eliminate terminology confusion between design and implementation",
          "status": "READY",
          "references_to_spec016_17": [],
          "implementation_impact": "NONE",
          "implementation_notes": "Simple cross-reference"
        },
        {
          "edit_id": "EDIT-SPEC016-008",
          "priority": "LOW",
          "type": "ADD_CROSS_REFERENCE",
          "location": {
            "section": "DBD-PARAM-010",
            "lines": "After line 78"
          },
          "current_content": "Operating Parameters section begins",
          "new_content": "Operating Parameters\n\nSee [IMPL001 Database Schema - Settings Table](IMPL001-database_schema.md#settings) for database storage of operating parameters.\n\nNote: This section lists decode/buffer-related parameters only. IMPL001 settings table includes additional configuration (volume_level, audio_sink, event intervals, etc.).",
          "rationale": "Cross-reference database storage; acknowledge SPEC016 doesn't list all settings",
          "status": "READY",
          "references_to_spec016_17": [],
          "implementation_impact": "NONE",
          "implementation_notes": "Simple cross-reference"
        },
        {
          "edit_id": "EDIT-SPEC016-009",
          "priority": "LOW",
          "type": "CLARIFY_BEHAVIOR",
          "location": {
            "section": "DBD-MIX-020",
            "lines": "225"
          },
          "current_content": "[DBD-MIX-020] Mixer periodically refills output ring buffer",
          "new_content": "[DBD-MIX-020] Mixer thread wakes approximately every output_refill_period ([DBD-PARAM-040], default 90ms) to check output ring buffer fill level and refill as needed.\n\nRing buffer uses lock-free atomic operations for continuous audio callback access. See [SPEC013 Lock-Free Ring Buffer - SSP-OUT-050].",
          "rationale": "Clarify periodic wake vs blocking timer; emphasize lock-free operation",
          "status": "READY",
          "references_to_spec016_17": ["DBD-PARAM-040"],
          "implementation_impact": "NONE",
          "implementation_notes": "Clarification only"
        },
        {
          "edit_id": "EDIT-SPEC016-010",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Related Documents - DBD-REL-010",
            "lines": "71"
          },
          "current_content": "> **Related Documents:** [SPEC002 Crossfade Design](SPEC002-crossfade.md) | [REQ002 Entity Definitions](REQ002-entity_definitions.md) | [SPEC017 Sample Rate Conversion](SPEC017-sample_rate_conversion.md)",
          "new_content": "> **Related Documents:** [SPEC002 Crossfade Design](SPEC002-crossfade.md) | [REQ002 Entity Definitions](REQ002-entity_definitions.md) | [SPEC017 Sample Rate Conversion](SPEC017-sample_rate_conversion.md) | [SPEC013 Single Stream Playback](SPEC013-single_stream_playback.md) | [SPEC014 Single Stream Design](SPEC014-single_stream_design.md) | [SPEC015 Playback Completion Fixes](SPEC015-playback_completion_fixes.md)",
          "rationale": "SPEC016 should acknowledge SPEC013/SPEC014 overlap; bidirectional references",
          "status": "READY",
          "references_to_spec016_17": [],
          "implementation_impact": "NONE",
          "implementation_notes": "Bidirectional cross-reference"
        },
        {
          "edit_id": "EDIT-SPEC016-011",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "DBD-FADE-010",
            "lines": "195"
          },
          "current_content": "Fade In/Out handler applies fade curves",
          "new_content": "Fade In/Out handler applies fade curves\n\nSee [SPEC002 Volume Fade Curve Formulas](SPEC002-crossfade.md#volume-fade-curve-formulas) for fade curve implementations:\n- [XFD-IMPL-091]: Linear fade\n- [XFD-IMPL-092]: Exponential fade-in\n- [XFD-IMPL-093]: Logarithmic fade-out\n- [XFD-IMPL-094]: Cosine fade\n- [XFD-IMPL-095]: Equal-power crossfade\n\nSPEC016 applies curves before buffering (pre-buffer); SPEC002 defines curve formulas.",
          "rationale": "SPEC016 applies fade curves; SPEC002 defines them - bidirectional reference",
          "status": "READY",
          "references_to_spec016_17": [],
          "implementation_impact": "NONE",
          "implementation_notes": "Bidirectional cross-reference to SPEC002"
        },
        {
          "edit_id": "EDIT-SPEC016-012",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "DBD-MIX-040",
            "lines": "After mixer algorithm description"
          },
          "current_content": "Mixer implementation description",
          "new_content": "Mixer implementation description\n\nFor crossfade timing calculation (WHEN crossfades occur), see [SPEC002 Crossfade Design - Implementation Algorithm](SPEC002-crossfade.md#implementation-algorithm) ([XFD-IMPL-010] through [XFD-IMPL-050]).\n\nSPEC016 defines HOW mixer implements crossfade overlap; SPEC002 defines WHEN overlap occurs.",
          "rationale": "Bidirectional reference: SPEC016 implements mixing, SPEC002 defines timing",
          "status": "READY",
          "references_to_spec016_17": [],
          "implementation_impact": "NONE",
          "implementation_notes": "Bidirectional cross-reference to SPEC002"
        },
        {
          "edit_id": "EDIT-SPEC016-013",
          "priority": "LOW",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "DBD-FMT-010",
            "lines": "246"
          },
          "current_content": "Stereo f32 sample format",
          "new_content": "Stereo f32 sample format (interleaved: [L, R, L, R, ...])\n\nSee [SPEC013 Decoding Flow - SSP-DEC-040](SPEC013-single_stream_playback.md#core-components) for interleaved stereo f32 format description.",
          "rationale": "Cross-reference sample format between SPEC016 and SPEC013",
          "status": "READY",
          "references_to_spec016_17": [],
          "implementation_impact": "NONE",
          "implementation_notes": "Bidirectional cross-reference"
        }
      ]
    },

    {
      "document": "SPEC017-sample_rate_conversion.md",
      "tier": 2,
      "total_edits": 5,
      "priority_breakdown": {"HIGH": 1, "MEDIUM": 3, "LOW": 1},
      "estimated_line_reduction": 0,
      "summary": "Add related documentation section and bidirectional references.",

      "edits": [
        {
          "edit_id": "EDIT-SPEC017-001",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Related Documentation",
            "lines": "7"
          },
          "current_content": "(Currently no related documentation section)",
          "new_content": "> **Related Documentation:** [Crossfade Design](SPEC002-crossfade.md) | [Decoder Buffer Design](SPEC016-decoder_buffer_design.md) | [Database Schema](IMPL001-database_schema.md) | [Architecture](SPEC001-architecture.md)",
          "rationale": "SPEC017 needs related documentation section for tick system usage",
          "status": "READY",
          "references_to_spec016_17": ["SPEC016"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC017-002",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "SRC-COEX-020",
            "lines": "228"
          },
          "current_content": "Discusses tick-to-sample conversion at decoder-buffer boundary",
          "new_content": "Tick-to-sample conversion at decoder-buffer boundary\n\nSee [SPEC016 Fade In/Out handlers](SPEC016-decoder_buffer_design.md#fade-inout-handlers) for implementation of tick-to-sample conversion:\n- [DBD-FADE-010]: Fade handler receives timing in ticks\n- [DBD-FADE-020]: Converts to sample counts at working_sample_rate\n- [DBD-FADE-030]: Applies fade curves during decode (pre-buffer)\n\nSPEC017 describes conversion point; SPEC016 implements it.",
          "rationale": "Link tick conversion to SPEC016 implementation point",
          "status": "READY",
          "references_to_spec016_17": ["DBD-FADE-010", "DBD-FADE-020", "DBD-FADE-030"],
          "implementation_impact": "NONE",
          "implementation_notes": "Bidirectional cross-reference"
        },
        {
          "edit_id": "EDIT-SPEC017-003",
          "priority": "LOW",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Working Sample Rate",
            "lines": "194-210"
          },
          "current_content": "WKMP defines a working_sample_rate for internal mixing operations ([DBD-PARAM-020] default: 44,100 Hz).",
          "new_content": "WKMP defines a working_sample_rate for internal mixing operations ([SPEC016 DBD-PARAM-020](SPEC016-decoder_buffer_design.md#operating-parameters), default: 44,100 Hz).\n\nSee [SPEC016 Resampling - DBD-RSMP-010] for resampling behavior when file sample rate != working_sample_rate.",
          "rationale": "Link to authoritative working_sample_rate definition and resampling behavior",
          "status": "READY",
          "references_to_spec016_17": ["DBD-PARAM-020", "DBD-RSMP-010"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        }
      ]
    },

    {
      "document": "SPEC015-playback_completion_fixes.md",
      "tier": 2,
      "total_edits": 3,
      "priority_breakdown": {"HIGH": 0, "MEDIUM": 2, "LOW": 1},
      "estimated_line_reduction": 0,
      "summary": "Add references to SPEC016 buffer specifications.",

      "edits": [
        {
          "edit_id": "EDIT-SPEC015-001",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Bug #1: Duration Climbing",
            "lines": "50"
          },
          "current_content": "Documents bug where duration calculated from growing buffer",
          "new_content": "Bug #1: Duration Climbing\n\nSee [SPEC016 Buffers](SPEC016-decoder_buffer_design.md#buffers) for authoritative buffer behavior specification ([DBD-BUF-010] through [DBD-BUF-060]).\n\nProblem: Duration calculated from growing buffer with incremental filling...",
          "rationale": "Bug fix document should reference authoritative buffer design",
          "status": "READY",
          "references_to_spec016_17": ["DBD-BUF-010", "DBD-BUF-060"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-SPEC015-002",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Bug #2: Race Condition",
            "lines": "87"
          },
          "current_content": "Race condition between position tracking and buffer growth",
          "new_content": "Bug #2: Race Condition\n\nRelated to buffer exhaustion detection ([SPEC016 DBD-BUF-040](SPEC016-decoder_buffer_design.md#buffers)).\n\nProblem: Race condition between position tracking and buffer growth...",
          "rationale": "Link race condition to buffer exhaustion detection in SPEC016",
          "status": "READY",
          "references_to_spec016_17": ["DBD-BUF-040"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        }
      ]
    },

    {
      "document": "REV004-incremental_buffer_implementation.md",
      "tier": 0,
      "total_edits": 6,
      "priority_breakdown": {"HIGH": 0, "MEDIUM": 4, "LOW": 2},
      "estimated_line_reduction": 0,
      "summary": "Add references to SPEC016 authoritative specifications.",

      "edits": [
        {
          "edit_id": "EDIT-REV004-001",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "SSD-DEC-030",
            "lines": "64"
          },
          "current_content": "2-thread decoder pool",
          "new_content": "2-thread decoder pool\n\nNote: Design evolved to serial execution per [SPEC016 DBD-DEC-040](SPEC016-decoder_buffer_design.md#decoders) for improved cache coherency.",
          "rationale": "Historical note about design evolution",
          "status": "READY",
          "references_to_spec016_17": ["DBD-DEC-040"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-REV004-002",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Fix 2: Partial Buffer Playback",
            "lines": "119"
          },
          "current_content": "Documents change to incremental buffer filling",
          "new_content": "Fix 2: Partial Buffer Playback\n\nExtends partial buffer strategy ([SPEC014 SSD-PBUF-010](SPEC014-single_stream_design.md)).\n\nSee [SPEC016 Buffers - DBD-BUF-050](SPEC016-decoder_buffer_design.md#buffers) for buffer flow control specification (decoder pauses when buffer nearly full).",
          "rationale": "Review document should cite authoritative buffer spec",
          "status": "READY",
          "references_to_spec016_17": ["DBD-BUF-050"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-REV004-003",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Fix 3: Buffer Underrun Detection",
            "lines": "292"
          },
          "current_content": "Detection: Mixer monitors playback position vs buffer length",
          "new_content": "Fix 3: Buffer Underrun Detection and Recovery\n\nImplements underrun detection specified in [SPEC016 Buffers - DBD-BUF-040](SPEC016-decoder_buffer_design.md#buffers).\n\nDetection: Mixer monitors playback position vs buffer length...",
          "rationale": "Reference authoritative underrun detection specification",
          "status": "READY",
          "references_to_spec016_17": ["DBD-BUF-040"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-REV004-004",
          "priority": "LOW",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Flatline Output",
            "lines": "371"
          },
          "current_content": "if let Some(ref underrun) = self.underrun_state.clone() { ... return underrun.flatline_frame; }",
          "new_content": "Flatline Output ([SSD-UND-017])\n\nUnderrun flatline similar to pause mode ([SPEC016 Mixer - DBD-MIX-050](SPEC016-decoder_buffer_design.md#mixer) exponential decay).\n\nif let Some(ref underrun) = self.underrun_state.clone() { ... return underrun.flatline_frame; }",
          "rationale": "Link underrun flatline to SPEC016 pause mode",
          "status": "READY",
          "references_to_spec016_17": ["DBD-MIX-050"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-REV004-005",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Memory Analysis",
            "lines": "507"
          },
          "current_content": "Average passage duration: 4 minutes (240 seconds). Per-buffer size: 240s × 44,100 Hz × 2 channels × 4 bytes = 84.67 MB",
          "new_content": "Memory Analysis\n\nBased on [SPEC016 DBD-PARAM-070](SPEC016-decoder_buffer_design.md#operating-parameters) buffer size specification:\n\nAverage passage duration: 4 minutes (240 seconds)\nPer-buffer size: 240s × 44,100 Hz × 2 channels × 4 bytes = 84.67 MB",
          "rationale": "Reference authoritative buffer sizing parameter",
          "status": "READY",
          "references_to_spec016_17": ["DBD-PARAM-070"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        },
        {
          "edit_id": "EDIT-REV004-006",
          "priority": "LOW",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "PassageBuffer: Added Incremental Methods",
            "lines": "130"
          },
          "current_content": "append_samples, reserve_capacity methods",
          "new_content": "PassageBuffer: Added Incremental Methods\n\nIncremental buffer filling extends [SPEC016 Buffers - DBD-BUF-010](SPEC016-decoder_buffer_design.md#buffers) architecture.\n\nMethods: append_samples, reserve_capacity",
          "rationale": "Reference base buffer architecture",
          "status": "READY",
          "references_to_spec016_17": ["DBD-BUF-010"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        }
      ]
    },

    {
      "document": "SPEC011-event_system.md",
      "tier": 2,
      "total_edits": 2,
      "priority_breakdown": {"HIGH": 0, "MEDIUM": 1, "LOW": 1},
      "estimated_line_reduction": 0,
      "summary": "Add reference to SPEC016 buffer lifecycle.",

      "edits": [
        {
          "edit_id": "EDIT-SPEC011-001",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "BufferStateChanged Event",
            "lines": "239"
          },
          "current_content": "BufferStatus enum definition",
          "new_content": "BufferStatus enum: Decoding, Ready, Playing, Exhausted\n\nSee [SPEC016 Buffers](SPEC016-decoder_buffer_design.md#buffers) for complete buffer lifecycle specification:\n- [DBD-BUF-020]: Empty on start\n- [DBD-BUF-030]: Mixer can't read empty buffer\n- [DBD-BUF-040]: Returns last sample if empty\n- [DBD-BUF-050]: Decoder pauses when nearly full\n- [DBD-BUF-060]: Informs queue on completion",
          "rationale": "Event definition should reference state machine in SPEC016",
          "status": "READY",
          "references_to_spec016_17": ["DBD-BUF-020", "DBD-BUF-030", "DBD-BUF-040", "DBD-BUF-050", "DBD-BUF-060"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        }
      ]
    },

    {
      "document": "SPEC007-api_design.md",
      "tier": 2,
      "total_edits": 2,
      "priority_breakdown": {"HIGH": 0, "MEDIUM": 1, "LOW": 1},
      "estimated_line_reduction": 0,
      "summary": "Add SPEC016/SPEC017 to related documentation.",

      "edits": [
        {
          "edit_id": "EDIT-SPEC007-001",
          "priority": "MEDIUM",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Related Documentation",
            "lines": "7"
          },
          "current_content": "Lists related documents",
          "new_content": "> **Related Documentation:** [Architecture](SPEC001-architecture.md) | [Event System](SPEC011-event_system.md) | [Decoder Buffer Design](SPEC016-decoder_buffer_design.md) | [Sample Rate Conversion](SPEC017-sample_rate_conversion.md)",
          "rationale": "API design should acknowledge SPEC016 for buffer status endpoints and SPEC017 for timing value formats",
          "status": "READY",
          "references_to_spec016_17": ["SPEC016", "SPEC017"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        }
      ]
    },

    {
      "document": "GOV001-document_hierarchy.md",
      "tier": 0,
      "total_edits": 2,
      "priority_breakdown": {"HIGH": 0, "MEDIUM": 1, "LOW": 1},
      "estimated_line_reduction": 0,
      "summary": "Add reference to SPEC016/SPEC017 in governance examples.",

      "edits": [
        {
          "edit_id": "EDIT-GOV001-001",
          "priority": "LOW",
          "type": "ADD_REFERENCE",
          "location": {
            "section": "Tier 2 Examples",
            "lines": "513"
          },
          "current_content": "Operating parameters (working_sample_rate, buffer sizes, decode scheduling)",
          "new_content": "Operating parameters (working_sample_rate, buffer sizes, decode scheduling)\n\nSee [SPEC016 Operating Parameters](SPEC016-decoder_buffer_design.md#operating-parameters) ([DBD-PARAM-010] through [DBD-PARAM-100]).",
          "rationale": "Governance document should reference concrete examples in SPEC016",
          "status": "READY",
          "references_to_spec016_17": ["DBD-PARAM-010"],
          "implementation_impact": "NONE",
          "implementation_notes": "Documentation-only change"
        }
      ]
    }
  ],

  "summary": {
    "total_edits": 137,
    "documents_with_edits": 12,
    "ready_for_execution": 134,
    "blocked_on_approval": 3,
    "estimated_line_reduction": 430,
    "major_implementation_changes": 2,
    "minor_implementation_changes": 3,
    "documentation_only_changes": 132,

    "priority_distribution": {
      "CRITICAL": 4,
      "HIGH": 45,
      "MEDIUM": 56,
      "LOW": 32
    },

    "edit_type_distribution": {
      "ALIGN_WITH_NEW_DESIGN": 12,
      "REMOVE_REDUNDANCY": 23,
      "ADD_REFERENCE": 68,
      "ADD_DEPRECATION": 4,
      "CLARIFY_PARAMETER": 3,
      "ADD_GLOSSARY": 1,
      "ADD_CLARIFICATION": 2,
      "ADD_CROSS_REFERENCE": 4
    },

    "documents_by_priority": [
      {"document": "SPEC014-single_stream_design.md", "HIGH": 12, "total": 28},
      {"document": "SPEC013-single_stream_playback.md", "HIGH": 8, "total": 18},
      {"document": "SPEC002-crossfade.md", "HIGH": 5, "total": 14},
      {"document": "SPEC016-decoder_buffer_design.md", "HIGH": 3, "total": 15},
      {"document": "IMPL001-database_schema.md", "HIGH": 3, "total": 8},
      {"document": "SPEC001-architecture.md", "HIGH": 3, "total": 10}
    ],

    "implementation_work_required": {
      "serial_decode_migration": {
        "description": "Migrate from 2-thread decoder pool to serial decode execution",
        "affected_files": ["wkmp-ap/src/playback/pipeline/single_stream/decoder.rs"],
        "effort": "MAJOR",
        "blocked_by_edits": ["EDIT-SPEC014-001", "EDIT-SPEC013-011"]
      },
      "tick_based_database": {
        "description": "Migrate database timing fields from REAL seconds to INTEGER ticks",
        "affected_files": ["migrations/*", "common/src/models/*"],
        "effort": "MAJOR",
        "blocked_by": "T1-TIMING-001 (Tier 1 approval required)",
        "blocked_edits": ["EDIT-IMPL001-001", "EDIT-SPEC002-003", "EDIT-SPEC002-007", "EDIT-SPEC002-008"]
      },
      "fade_application_timing": {
        "description": "Verify fade curves applied pre-buffer (during decode) vs on-read",
        "affected_files": ["wkmp-ap/src/playback/pipeline/single_stream/buffer.rs"],
        "effort": "MINOR",
        "blocked_by_edits": ["EDIT-SPEC014-002"]
      }
    },

    "next_steps": [
      "1. TIER 1 APPROVAL: Obtain approval for tick-based database schema (T1-TIMING-001)",
      "2. Execute 134 READY edits (documentation-only changes)",
      "3. After Tier 1 approval: Execute 3 BLOCKED edits",
      "4. Verify fade application timing implementation (MINOR code check)",
      "5. Plan serial decode migration (MAJOR code change)",
      "6. Plan tick-based database migration (MAJOR code + migration)"
    ]
  }
}
