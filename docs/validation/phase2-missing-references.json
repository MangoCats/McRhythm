{
  "metadata": {
    "generated_at": "2025-10-19T00:00:00Z",
    "agent": "Agent 5: Missing Cross-Reference Detector",
    "phase": "Phase 2",
    "purpose": "Identify all locations where documents discuss SPEC016/SPEC017 topics but don't reference them",
    "documents_analyzed": 23,
    "total_missing_references_found": 47
  },

  "summary": {
    "critical_priority": 12,
    "major_priority": 23,
    "minor_priority": 12,
    "documents_needing_most_additions": [
      {
        "document": "SPEC002-crossfade.md",
        "count": 8,
        "reason": "Discusses crossfade timing and volume mixing without referencing SPEC016 mixer architecture or SPEC017 tick-based timing"
      },
      {
        "document": "SPEC013-single_stream_playback.md",
        "count": 10,
        "reason": "Describes decoder-buffer architecture overlapping with SPEC016, but doesn't cross-reference the authoritative design"
      },
      {
        "document": "SPEC014-single_stream_design.md",
        "count": 9,
        "reason": "Detailed design overlapping SPEC016/SPEC017 without acknowledging authoritative specs"
      },
      {
        "document": "SPEC001-architecture.md",
        "count": 6,
        "reason": "Architecture overview mentions audio player components without linking to SPEC016 detail"
      },
      {
        "document": "IMPL001-database_schema.md",
        "count": 5,
        "reason": "Settings table parameters should reference SPEC016 operating parameters and SPEC017 tick storage"
      }
    ],
    "key_integration_points": [
      "SPEC002 crossfade timing should reference SPEC016 mixer behavior and SPEC017 tick precision",
      "SPEC013/SPEC014 buffer management should defer to SPEC016 as authoritative",
      "SPEC001 architecture should deep-link to SPEC016 for audio player details",
      "IMPL001 settings table should cite SPEC016 parameter definitions",
      "All documents using timing values should reference SPEC017 tick system"
    ]
  },

  "missing_references": [
    {
      "id": "MR-001",
      "location": {
        "document": "SPEC002-crossfade.md",
        "section": "Implementation Algorithm",
        "line_range": "194-243",
        "context": "Discusses crossfade timing calculation and when passages overlap"
      },
      "concept_used": "Crossfade duration calculation and passage overlap timing",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-MIX-040",
        "reason": "SPEC016 defines HOW the mixer implements crossfade overlap; SPEC002 defines WHEN overlap occurs. These are complementary."
      },
      "suggested_addition": {
        "text": "See [SPEC016 Decoder Buffer Design - Mixer](SPEC016-decoder_buffer_design.md#mixer) for implementation of crossfade mixing with overlapping passages.",
        "placement": "After line 243 in XFD-IMPL-020 pseudocode section"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "CRITICAL",
      "bidirectional": true,
      "notes": "SPEC016 should also reference SPEC002 for timing calculation. This is a fundamental integration point."
    },

    {
      "id": "MR-002",
      "location": {
        "document": "SPEC002-crossfade.md",
        "section": "Queue Entry Timing Specification",
        "line_range": "950-982",
        "context": "Specifies timing values as 'unsigned integer milliseconds'"
      },
      "concept_used": "Milliseconds timing format for API",
      "should_reference": {
        "document": "SPEC017-sample_rate_conversion.md",
        "requirement_id": "SRC-API-020",
        "reason": "SPEC017 defines authoritative conversion from milliseconds to ticks (ms * 28224)"
      },
      "suggested_addition": {
        "text": "See [SPEC017 Sample Rate Conversion - API Representation](SPEC017-sample_rate_conversion.md#api-representation) for conversion between milliseconds (API) and ticks (internal storage).",
        "placement": "After line 980 in XFD-QUEUE-030"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MAJOR",
      "bidirectional": false,
      "notes": "SPEC002 uses milliseconds but should acknowledge the tick-based internal representation"
    },

    {
      "id": "MR-003",
      "location": {
        "document": "SPEC002-crossfade.md",
        "section": "Database Storage",
        "line_range": "1023-1041",
        "context": "States timing points stored as 'seconds, nullable'"
      },
      "concept_used": "Database storage of passage timing points",
      "should_reference": {
        "document": "SPEC017-sample_rate_conversion.md",
        "requirement_id": "SRC-DB-011 through SRC-DB-016",
        "reason": "SPEC017 defines authoritative database storage format as INTEGER ticks, not seconds"
      },
      "suggested_addition": {
        "text": "**CORRECTION:** Database stores timing as INTEGER ticks, not seconds. See [SPEC017 Database Storage](SPEC017-sample_rate_conversion.md#database-storage) for tick-based storage format ([SRC-DB-011] through [SRC-DB-016]).",
        "placement": "Replace XFD-DB-010 text (line 1025-1033)"
      },
      "tier": 2,
      "auto_editable": false,
      "priority": "CRITICAL",
      "bidirectional": false,
      "notes": "SPEC002 contains INCORRECT information. Database uses ticks, not seconds. This is a discrepancy that must be resolved."
    },

    {
      "id": "MR-004",
      "location": {
        "document": "SPEC002-crossfade.md",
        "section": "Volume Calculations",
        "line_range": "779-813",
        "context": "Describes volume mixing formula during crossfade overlap"
      },
      "concept_used": "Final Output = (Passage A Audio × A Volume) + (Passage B Audio × B Volume)",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-MIX-040",
        "reason": "SPEC016 mixer implements this exact calculation"
      },
      "suggested_addition": {
        "text": "See [SPEC016 Mixer](SPEC016-decoder_buffer_design.md#mixer) for implementation details of volume mixing during crossfade ([DBD-MIX-040]).",
        "placement": "After line 785 in XFD-VOL-010"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MAJOR",
      "bidirectional": true,
      "notes": "SPEC016 should reference SPEC002 for when this mixing occurs"
    },

    {
      "id": "MR-005",
      "location": {
        "document": "SPEC002-crossfade.md",
        "section": "Volume Fade Update Frequency",
        "line_range": "622-667",
        "context": "Discusses volume_fade_update_period setting (default 10ms)"
      },
      "concept_used": "volume_fade_update_period configuration parameter",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-PARAM-040",
        "reason": "Should reference output_refill_period (90ms) to clarify these are different timers"
      },
      "suggested_addition": {
        "text": "Note: This is distinct from [DBD-PARAM-040] output_refill_period (90ms), which controls mixer-to-output ring buffer fills. Volume updates occur more frequently for smooth fade curves.",
        "placement": "After line 661 in Configuration section"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MINOR",
      "bidirectional": false,
      "notes": "Clarifies relationship between two different timing parameters"
    },

    {
      "id": "MR-006",
      "location": {
        "document": "SPEC013-single_stream_playback.md",
        "section": "Core Components - Audio Decoder",
        "line_range": "77-100",
        "context": "Describes decoder flow and sample rate conversion"
      },
      "concept_used": "Resample to standard rate (44.1kHz)",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-PARAM-020",
        "reason": "44.1kHz is the default working_sample_rate, authoritative value in SPEC016"
      },
      "suggested_addition": {
        "text": "See [SPEC016 Operating Parameters](SPEC016-decoder_buffer_design.md#operating-parameters) for authoritative working_sample_rate definition ([DBD-PARAM-020], default: 44100Hz).",
        "placement": "After line 99 in SSP-DEC-040"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MAJOR",
      "bidirectional": false,
      "notes": "SPEC013 hardcodes 44.1kHz without citing authoritative source"
    },

    {
      "id": "MR-007",
      "location": {
        "document": "SPEC013-single_stream_playback.md",
        "section": "Passage Buffer Manager",
        "line_range": "120-180",
        "context": "Describes PCM buffer storage and memory calculations"
      },
      "concept_used": "15-second buffer, memory calculations",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-PARAM-070",
        "reason": "SPEC016 defines authoritative playout_ringbuffer_size (661941 samples = 15.01 seconds)"
      },
      "suggested_addition": {
        "text": "See [SPEC016 Decoder Buffer Design](SPEC016-decoder_buffer_design.md) for complete decoder-buffer chain architecture, including authoritative buffer sizing ([DBD-PARAM-070]: 661941 samples = 15.01s @ 44.1kHz).",
        "placement": "At beginning of section (line 120), as introductory note"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "CRITICAL",
      "bidirectional": false,
      "notes": "SPEC013 describes buffer management but SPEC016 is now the authoritative source"
    },

    {
      "id": "MR-008",
      "location": {
        "document": "SPEC013-single_stream_playback.md",
        "section": "Crossfade Mixer",
        "line_range": "280-350",
        "context": "Describes sample-accurate crossfade mixing algorithm"
      },
      "concept_used": "Mixer reads from buffers, applies fade curves, sums audio",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-MIX-010 through DBD-MIX-052",
        "reason": "SPEC016 now contains authoritative mixer specification"
      },
      "suggested_addition": {
        "text": "**Note:** [SPEC016 Decoder Buffer Design - Mixer](SPEC016-decoder_buffer_design.md#mixer) now provides the authoritative mixer specification ([DBD-MIX-010] through [DBD-MIX-052]).",
        "placement": "At beginning of Crossfade Mixer section (line 280)"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "CRITICAL",
      "bidirectional": false,
      "notes": "SPEC013 overlaps with SPEC016. Should acknowledge SPEC016 as authoritative."
    },

    {
      "id": "MR-009",
      "location": {
        "document": "SPEC013-single_stream_playback.md",
        "section": "Related Documentation",
        "line_range": "3",
        "context": "Lists related documents at top of file"
      },
      "concept_used": "Related documentation links",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md and SPEC017-sample_rate_conversion.md",
        "requirement_id": "N/A",
        "reason": "SPEC016/SPEC017 are directly related to single-stream playback architecture"
      },
      "suggested_addition": {
        "text": " | [Decoder Buffer Design](SPEC016-decoder_buffer_design.md) | [Sample Rate Conversion](SPEC017-sample_rate_conversion.md)",
        "placement": "Append to Related Documentation line (line 3)"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MAJOR",
      "bidirectional": true,
      "notes": "SPEC016 and SPEC017 should also list SPEC013 as related"
    },

    {
      "id": "MR-010",
      "location": {
        "document": "SPEC014-single_stream_design.md",
        "section": "Decode-and-Skip Approach",
        "line_range": "94-160",
        "context": "Describes decode-from-start approach for sample-accurate positioning"
      },
      "concept_used": "Sample-accurate positioning, decode from start",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-DEC-050, DBD-DEC-070, DBD-DEC-080",
        "reason": "SPEC016 defines same decode-from-start approach with sample-accurate timing"
      },
      "suggested_addition": {
        "text": "See [SPEC016 Decoders](SPEC016-decoder_buffer_design.md#decoders) for authoritative decoder behavior specification ([DBD-DEC-050]: decode from start, [DBD-DEC-070]/[DBD-DEC-080]: sample-accurate timing).",
        "placement": "After SSD-DEC-025 (line 160)"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "CRITICAL",
      "bidirectional": false,
      "notes": "SPEC014 and SPEC016 describe same approach; SPEC016 is authoritative"
    },

    {
      "id": "MR-011",
      "location": {
        "document": "SPEC014-single_stream_design.md",
        "section": "Full Decode Strategy",
        "line_range": "180-240",
        "context": "Discusses full vs partial buffer strategies"
      },
      "concept_used": "Full decode for current/next, partial for queued passages",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-OV-050, DBD-PARAM-050",
        "reason": "SPEC016 describes allocation of maximum_decode_streams decoder-buffer chains"
      },
      "suggested_addition": {
        "text": "See [SPEC016 Overview](SPEC016-decoder_buffer_design.md#overview) for complete decoder-buffer chain allocation strategy ([DBD-OV-050], [DBD-PARAM-050]: maximum_decode_streams default 12).",
        "placement": "At beginning of Full Decode Strategy section (line 180)"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MAJOR",
      "bidirectional": false,
      "notes": "SPEC014 describes buffer strategy; SPEC016 contains authoritative design"
    },

    {
      "id": "MR-012",
      "location": {
        "document": "SPEC014-single_stream_design.md",
        "section": "Buffer Underrun Handling",
        "line_range": "340-390",
        "context": "Describes underrun detection and recovery"
      },
      "concept_used": "Buffer underrun detection, auto-pause, flatline output",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-BUF-040, DBD-MIX-050, DBD-MIX-052",
        "reason": "SPEC016 defines mixer pause mode with exponential decay to flatline"
      },
      "suggested_addition": {
        "text": "See [SPEC016 Mixer - Pause Mode](SPEC016-decoder_buffer_design.md#mixer) for authoritative pause behavior specification ([DBD-MIX-050]: exponential decay, [DBD-MIX-052]: decay to zero).",
        "placement": "After SSD-UND-026 (line 390)"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MAJOR",
      "bidirectional": false,
      "notes": "SPEC014 describes underrun pause; SPEC016 defines mixer pause mode"
    },

    {
      "id": "MR-013",
      "location": {
        "document": "SPEC014-single_stream_design.md",
        "section": "Crossfade Timing Calculation",
        "line_range": "500-560",
        "context": "States CrossfadeMixer owns calculation responsibility, executes Phase 3 validation"
      },
      "concept_used": "Crossfade timing calculation",
      "should_reference": {
        "document": "SPEC002-crossfade.md",
        "requirement_id": "XFD-IMPL-010 through XFD-IMPL-050",
        "reason": "SPEC002 contains authoritative crossfade calculation algorithm"
      },
      "suggested_addition": {
        "text": "See [SPEC002 Crossfade Design - Implementation Algorithm](SPEC002-crossfade.md#implementation-algorithm) for complete crossfade timing calculation specification ([XFD-IMPL-010] through [XFD-IMPL-050]).",
        "placement": "After SSD-MIX-042 (line 560)"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MAJOR",
      "bidirectional": true,
      "notes": "SPEC002 and SPEC014 both discuss crossfade calculation; SPEC002 is authoritative"
    },

    {
      "id": "MR-014",
      "location": {
        "document": "SPEC001-architecture.md",
        "section": "Audio Player Responsibilities",
        "line_range": "111-120",
        "context": "Lists audio player responsibilities including decoding, buffering, crossfading"
      },
      "concept_used": "Single-stream audio architecture, decoder, buffer, mixer components",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-OV-010 through DBD-OV-080",
        "reason": "SPEC016 provides detailed architecture of audio player components"
      },
      "suggested_addition": {
        "text": "See [SPEC016 Decoder Buffer Design](SPEC016-decoder_buffer_design.md) for complete audio player architecture including decoder-buffer chains, mixer, and output system.",
        "placement": "After ARCH-PC-010 responsibility list (line 120)"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "CRITICAL",
      "bidirectional": true,
      "notes": "SPEC001 overview should deep-link to SPEC016 detailed design"
    },

    {
      "id": "MR-015",
      "location": {
        "document": "SPEC001-architecture.md",
        "section": "Audio Player Responsibilities",
        "line_range": "112",
        "context": "States 'sample-accurate crossfading (~0.02ms precision)'"
      },
      "concept_used": "Sample-accurate precision value",
      "should_reference": {
        "document": "SPEC017-sample_rate_conversion.md",
        "requirement_id": "SRC-TICK-030",
        "reason": "0.02ms is NOT tick precision; tick precision is 0.0000354ms. Should clarify what 0.02ms represents."
      },
      "suggested_addition": {
        "text": "Note: 0.02ms represents typical crossfade scheduling precision, not tick-level precision. For tick-based timing precision (~35.4 nanoseconds), see [SPEC017 Tick Rate](SPEC017-sample_rate_conversion.md#tick-rate-calculation) ([SRC-TICK-030]).",
        "placement": "Add footnote or clarification after '~0.02ms precision'"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MINOR",
      "bidirectional": false,
      "notes": "Clarifies precision claim; 0.02ms is not tick precision"
    },

    {
      "id": "MR-016",
      "location": {
        "document": "SPEC001-architecture.md",
        "section": "Song Boundary Detection",
        "line_range": "366-373",
        "context": "Describes position event generation with configurable interval (default 1000ms)"
      },
      "concept_used": "position_event_interval_ms configuration setting",
      "should_reference": {
        "document": "IMPL001-database_schema.md",
        "requirement_id": "Settings table event timing configuration",
        "reason": "IMPL001 defines settings table with position_event_interval_ms"
      },
      "suggested_addition": {
        "text": "See [IMPL001 Database Schema - Settings Table](IMPL001-database_schema.md#settings-table---event-timing-configuration) for position_event_interval_ms and playback_progress_interval_ms configuration.",
        "placement": "After line 373 in ARCH-SNGC-030 section"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MINOR",
      "bidirectional": true,
      "notes": "Links architecture behavior to database configuration"
    },

    {
      "id": "MR-017",
      "location": {
        "document": "IMPL001-database_schema.md",
        "section": "Settings Table - Event Timing Configuration",
        "line_range": "750-900",
        "context": "Describes position_event_interval_ms and playback_progress_interval_ms"
      },
      "concept_used": "Event timing configuration parameters",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-PARAM-040",
        "reason": "Should clarify relationship to output_refill_period (90ms)"
      },
      "suggested_addition": {
        "text": "Note: These event intervals are distinct from [DBD-PARAM-040] output_refill_period (90ms) which controls mixer-to-output buffer refills. See [SPEC016 Operating Parameters](SPEC016-decoder_buffer_design.md#operating-parameters).",
        "placement": "Add note in Event Timing Configuration section"
      },
      "tier": 3,
      "auto_editable": true,
      "priority": "MINOR",
      "bidirectional": false,
      "notes": "Clarifies relationship between different timing parameters"
    },

    {
      "id": "MR-018",
      "location": {
        "document": "IMPL001-database_schema.md",
        "section": "Passages table",
        "line_range": "143-176",
        "context": "Defines timing fields as REAL (seconds)"
      },
      "concept_used": "Passage timing fields stored as seconds",
      "should_reference": {
        "document": "SPEC017-sample_rate_conversion.md",
        "requirement_id": "SRC-DB-011 through SRC-DB-016",
        "reason": "SPEC017 defines timing fields as INTEGER ticks, not REAL seconds - DISCREPANCY"
      },
      "suggested_addition": {
        "text": "**CRITICAL DISCREPANCY:** SPEC017 specifies timing fields as INTEGER ticks ([SRC-DB-011] through [SRC-DB-016]), not REAL seconds. Database schema must be updated to match tick-based storage. See [SPEC017 Database Storage](SPEC017-sample_rate_conversion.md#database-storage).",
        "placement": "Add warning note in passages table description"
      },
      "tier": 3,
      "auto_editable": false,
      "priority": "CRITICAL",
      "bidirectional": false,
      "notes": "CRITICAL DISCREPANCY: IMPL001 and SPEC017 contradict on timing storage format"
    },

    {
      "id": "MR-019",
      "location": {
        "document": "IMPL001-database_schema.md",
        "section": "Settings Table - Audio Configuration",
        "line_range": "746-770",
        "context": "Contains volume_level and other playback settings"
      },
      "concept_used": "Audio configuration parameters",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-PARAM-010 through DBD-PARAM-100",
        "reason": "SPEC016 defines authoritative operating parameters"
      },
      "suggested_addition": {
        "text": "See [SPEC016 Operating Parameters](SPEC016-decoder_buffer_design.md#operating-parameters) for complete audio player operating parameter definitions ([DBD-PARAM-010] through [DBD-PARAM-100]).",
        "placement": "Add reference in Settings Table - Audio Configuration section"
      },
      "tier": 3,
      "auto_editable": true,
      "priority": "MAJOR",
      "bidirectional": true,
      "notes": "IMPL001 should cite SPEC016 for parameter definitions"
    },

    {
      "id": "MR-020",
      "location": {
        "document": "SPEC015-playback_completion_fixes.md",
        "section": "Bug #1: Duration Climbing",
        "line_range": "50-100",
        "context": "Documents bug where duration calculated from growing buffer"
      },
      "concept_used": "Buffer duration calculation, PassageBuffer structure",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-BUF-010 through DBD-BUF-060",
        "reason": "SPEC016 defines buffer behavior; bug fix should reference authoritative buffer spec"
      },
      "suggested_addition": {
        "text": "See [SPEC016 Buffers](SPEC016-decoder_buffer_design.md#buffers) for authoritative buffer behavior specification ([DBD-BUF-010] through [DBD-BUF-060]).",
        "placement": "At beginning of Bug #1 section (line 50)"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MINOR",
      "bidirectional": false,
      "notes": "Bug fix document should reference authoritative buffer design"
    },

    {
      "id": "MR-021",
      "location": {
        "document": "REV004-incremental_buffer_implementation.md",
        "section": "Fix 2: Partial Buffer Playback",
        "line_range": "120-180",
        "context": "Documents change to incremental buffer filling"
      },
      "concept_used": "BufferManager API, incremental decode",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-BUF-050",
        "reason": "SPEC016 defines buffer pause behavior when nearly full"
      },
      "suggested_addition": {
        "text": "See [SPEC016 Buffers](SPEC016-decoder_buffer_design.md#buffers) for buffer flow control specification ([DBD-BUF-050]: decoder pauses when buffer nearly full).",
        "placement": "Add reference in Fix 2 section"
      },
      "tier": 0,
      "auto_editable": true,
      "priority": "MINOR",
      "bidirectional": false,
      "notes": "Review document should cite authoritative buffer spec"
    },

    {
      "id": "MR-022",
      "location": {
        "document": "SPEC011-event_system.md",
        "section": "BufferStateChanged Event",
        "line_range": "223-239",
        "context": "Defines BufferStateChanged event with BufferStatus enum"
      },
      "concept_used": "Buffer states: Decoding, Ready, Playing, Exhausted",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-BUF-020 through DBD-BUF-060",
        "reason": "SPEC016 defines buffer lifecycle states"
      },
      "suggested_addition": {
        "text": "See [SPEC016 Buffers](SPEC016-decoder_buffer_design.md#buffers) for complete buffer lifecycle specification ([DBD-BUF-020]: empty on start, [DBD-BUF-030]: mixer can't read empty, [DBD-BUF-060]: informs queue on completion).",
        "placement": "Add reference after BufferStatus enum definition (line 239)"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MINOR",
      "bidirectional": true,
      "notes": "Event definition should reference state machine in SPEC016"
    },

    {
      "id": "MR-023",
      "location": {
        "document": "SPEC007-api_design.md",
        "section": "Related Documentation",
        "line_range": "7",
        "context": "Lists related documents"
      },
      "concept_used": "API design related documents",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md and SPEC017-sample_rate_conversion.md",
        "requirement_id": "N/A",
        "reason": "API should reference SPEC016 for buffer status endpoints and SPEC017 for timing value formats"
      },
      "suggested_addition": {
        "text": " | [Decoder Buffer Design](SPEC016-decoder_buffer_design.md) | [Sample Rate Conversion](SPEC017-sample_rate_conversion.md)",
        "placement": "Append to Related Documentation line"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MINOR",
      "bidirectional": false,
      "notes": "API design should acknowledge SPEC016/SPEC017 for technical details"
    },

    {
      "id": "MR-024",
      "location": {
        "document": "SPEC002-crossfade.md",
        "section": "Pause and Resume Behavior",
        "line_range": "671-746",
        "context": "Describes pause (immediate) and resume (fade-in) behavior"
      },
      "concept_used": "Pause mode, resume fade-in",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-MIX-050, DBD-MIX-051, DBD-MIX-052, DBD-PARAM-090, DBD-PARAM-100",
        "reason": "SPEC016 defines mixer pause mode with exponential decay parameters"
      },
      "suggested_addition": {
        "text": "See [SPEC016 Mixer - Pause Mode](SPEC016-decoder_buffer_design.md#mixer) for mixer implementation of pause behavior ([DBD-MIX-050] through [DBD-MIX-052]: exponential decay using [DBD-PARAM-090] pause_decay_factor and [DBD-PARAM-100] pause_decay_floor).",
        "placement": "After XFD-PAUS-010 (line 685)"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MAJOR",
      "bidirectional": true,
      "notes": "SPEC002 defines pause behavior; SPEC016 implements it"
    },

    {
      "id": "MR-025",
      "location": {
        "document": "SPEC013-single_stream_playback.md",
        "section": "Performance Characteristics",
        "line_range": "400-450",
        "context": "Discusses memory usage and latency"
      },
      "concept_used": "Buffer sizes, memory calculations",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-PARAM-030, DBD-PARAM-070, DBD-PARAM-080",
        "reason": "SPEC016 defines authoritative buffer sizes"
      },
      "suggested_addition": {
        "text": "See [SPEC016 Operating Parameters](SPEC016-decoder_buffer_design.md#operating-parameters) for authoritative buffer sizing: [DBD-PARAM-030] output_ringbuffer_size (8192 samples), [DBD-PARAM-070] playout_ringbuffer_size (661941 samples), [DBD-PARAM-080] playout_ringbuffer_headroom (441 samples).",
        "placement": "Add reference in Performance Characteristics section"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MAJOR",
      "bidirectional": false,
      "notes": "Performance analysis should cite authoritative buffer parameters"
    },

    {
      "id": "MR-026",
      "location": {
        "document": "SPEC014-single_stream_design.md",
        "section": "Decoder Pool Lifecycle",
        "line_range": "420-460",
        "context": "Describes 2-thread decoder pool with priority queue"
      },
      "concept_used": "Decoder pool, priority queue (Immediate, Next, Prefetch)",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-DEC-040, DBD-PARAM-060",
        "reason": "SPEC016 defines serial decoding (one at a time) and decode_work_period"
      },
      "suggested_addition": {
        "text": "**DISCREPANCY:** SPEC016 specifies serial decoding (one decode at a time, [DBD-DEC-040]) with periodic priority re-evaluation ([DBD-PARAM-060] decode_work_period: 5000ms). This conflicts with 2-thread pool design. See [SPEC016 Decoders](SPEC016-decoder_buffer_design.md#decoders).",
        "placement": "Add warning note in Decoder Pool Lifecycle section"
      },
      "tier": 2,
      "auto_editable": false,
      "priority": "CRITICAL",
      "bidirectional": false,
      "notes": "DISCREPANCY: SPEC014 describes 2-thread pool; SPEC016 describes serial decoding"
    },

    {
      "id": "MR-027",
      "location": {
        "document": "SPEC001-architecture.md",
        "section": "Component Implementation Details",
        "line_range": "1168-1177",
        "context": "Lists related design specifications"
      },
      "concept_used": "Related design specifications",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md and SPEC017-sample_rate_conversion.md",
        "requirement_id": "N/A",
        "reason": "SPEC016/SPEC017 are core design specifications"
      },
      "suggested_addition": {
        "text": "- **Audio Player Architecture**: See [Decoder Buffer Design](SPEC016-decoder_buffer_design.md)\n- **Timing Precision**: See [Sample Rate Conversion](SPEC017-sample_rate_conversion.md)",
        "placement": "Add to component implementation details list (after line 1177)"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MAJOR",
      "bidirectional": true,
      "notes": "Architecture overview should list SPEC016/SPEC017 as core design specs"
    },

    {
      "id": "MR-028",
      "location": {
        "document": "SPEC002-crossfade.md",
        "section": "Implementation Notes",
        "line_range": "764-773",
        "context": "States 'Timing precision: All calculations use floating-point seconds'"
      },
      "concept_used": "Floating-point seconds for timing",
      "should_reference": {
        "document": "SPEC017-sample_rate_conversion.md",
        "requirement_id": "SRC-PROB-020, SRC-SOL-010, SRC-TICK-020",
        "reason": "SPEC017 states floating-point seconds introduce cumulative rounding errors; tick-based timing should be used"
      },
      "suggested_addition": {
        "text": "**DISCREPANCY:** SPEC017 specifies tick-based timing (not floating-point seconds) to avoid cumulative rounding errors ([SRC-PROB-020]). All timing should use i64 ticks ([SRC-TICK-020]: 28,224,000 ticks/second). See [SPEC017 Problem Statement](SPEC017-sample_rate_conversion.md#problem-statement).",
        "placement": "Replace statement about floating-point seconds with tick-based timing"
      },
      "tier": 2,
      "auto_editable": false,
      "priority": "CRITICAL",
      "bidirectional": false,
      "notes": "CRITICAL DISCREPANCY: SPEC002 uses floating-point; SPEC017 requires ticks"
    },

    {
      "id": "MR-029",
      "location": {
        "document": "SPEC013-single_stream_playback.md",
        "section": "Technology Stack",
        "line_range": "600-650",
        "context": "Lists rubato for sample rate conversion"
      },
      "concept_used": "rubato for resampling",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-RSMP-010, DBD-RSMP-020",
        "reason": "SPEC016 defines resampling behavior (bypass when at working_sample_rate)"
      },
      "suggested_addition": {
        "text": "See [SPEC016 Resampling](SPEC016-decoder_buffer_design.md#resampling) for resampling behavior specification ([DBD-RSMP-010]: resample when != working_sample_rate, [DBD-RSMP-020]: bypass when == working_sample_rate).",
        "placement": "Add reference in Technology Stack section"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MINOR",
      "bidirectional": false,
      "notes": "Technology stack should reference resampling behavior spec"
    },

    {
      "id": "MR-030",
      "location": {
        "document": "SPEC014-single_stream_design.md",
        "section": "PassageBuffer Structure",
        "line_range": "200-250",
        "context": "Defines PassageBuffer with total_duration_ms field"
      },
      "concept_used": "Duration tracking in milliseconds",
      "should_reference": {
        "document": "SPEC017-sample_rate_conversion.md",
        "requirement_id": "SRC-API-020, SRC-API-030",
        "reason": "Milliseconds used for API; ticks used internally"
      },
      "suggested_addition": {
        "text": "Note: total_duration_ms is for API responses. Internal timing uses ticks. See [SPEC017 API Representation](SPEC017-sample_rate_conversion.md#api-representation) for millisecond ↔ tick conversion ([SRC-API-020], [SRC-API-030]).",
        "placement": "Add note in PassageBuffer structure description"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MINOR",
      "bidirectional": false,
      "notes": "Clarifies timing representation in PassageBuffer"
    },

    {
      "id": "MR-031",
      "location": {
        "document": "SPEC001-architecture.md",
        "section": "Audio Output",
        "line_range": "113-120",
        "context": "Lists cpal for cross-platform audio output"
      },
      "concept_used": "cpal output with ring buffer",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-OUT-010, DBD-PARAM-030, DBD-PARAM-040",
        "reason": "SPEC016 defines output ring buffer and refill behavior"
      },
      "suggested_addition": {
        "text": "See [SPEC016 Output](SPEC016-decoder_buffer_design.md#output) for output ring buffer specification ([DBD-OUT-010], [DBD-PARAM-030]: 8192 samples, [DBD-PARAM-040]: 90ms refill period).",
        "placement": "After mention of cpal output"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MINOR",
      "bidirectional": false,
      "notes": "Architecture should reference output system details"
    },

    {
      "id": "MR-032",
      "location": {
        "document": "SPEC002-crossfade.md",
        "section": "Timing Point Definitions",
        "line_range": "50-80",
        "context": "Defines six timing points (Start, Fade-In, Lead-In, Lead-Out, Fade-Out, End)"
      },
      "concept_used": "Timing points stored in database",
      "should_reference": {
        "document": "SPEC017-sample_rate_conversion.md",
        "requirement_id": "SRC-DB-011 through SRC-DB-016",
        "reason": "SPEC017 defines database storage format for timing points (INTEGER ticks)"
      },
      "suggested_addition": {
        "text": "Database storage: All timing points stored as INTEGER ticks (not seconds). See [SPEC017 Database Storage](SPEC017-sample_rate_conversion.md#database-storage) for field definitions ([SRC-DB-011] through [SRC-DB-016]).",
        "placement": "Add note after Point Definitions section (line 80)"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MAJOR",
      "bidirectional": false,
      "notes": "Timing points section should acknowledge database storage format"
    },

    {
      "id": "MR-033",
      "location": {
        "document": "SPEC016-decoder_buffer_design.md",
        "section": "Related Documents",
        "line_range": "71",
        "context": "Lists SPEC002, REQ002, SPEC017 as related"
      },
      "concept_used": "Related documentation",
      "should_reference": {
        "document": "SPEC013-single_stream_playback.md and SPEC014-single_stream_design.md",
        "requirement_id": "N/A",
        "reason": "SPEC013/SPEC014 contain overlapping content; should acknowledge relationship"
      },
      "suggested_addition": {
        "text": ", [SPEC013 Single Stream Playback](SPEC013-single_stream_playback.md), [SPEC014 Single Stream Design](SPEC014-single_stream_design.md)",
        "placement": "Append to DBD-REL-010 related documents list"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MAJOR",
      "bidirectional": true,
      "notes": "SPEC016 should acknowledge SPEC013/SPEC014 overlap; those docs should defer to SPEC016"
    },

    {
      "id": "MR-034",
      "location": {
        "document": "SPEC017-sample_rate_conversion.md",
        "section": "Related Documentation",
        "line_range": "7",
        "context": "Currently no related documentation section"
      },
      "concept_used": "Missing related documentation section",
      "should_reference": {
        "document": "SPEC002-crossfade.md, SPEC016-decoder_buffer_design.md, IMPL001-database_schema.md",
        "requirement_id": "N/A",
        "reason": "SPEC017 is used by crossfade timing, decoder-buffer, and database schema"
      },
      "suggested_addition": {
        "text": "> **Related Documentation:** [Crossfade Design](SPEC002-crossfade.md) | [Decoder Buffer Design](SPEC016-decoder_buffer_design.md) | [Database Schema](IMPL001-database_schema.md) | [Architecture](SPEC001-architecture.md)",
        "placement": "Add after document header (line 7)"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MAJOR",
      "bidirectional": true,
      "notes": "SPEC017 needs related documentation section"
    },

    {
      "id": "MR-035",
      "location": {
        "document": "SPEC002-crossfade.md",
        "section": "Fade Behavior During Crossfade",
        "line_range": "775-778",
        "context": "States 'Fades operate independently of crossfade overlap'"
      },
      "concept_used": "Fade curves applied during crossfade",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-FADE-030, DBD-FADE-050",
        "reason": "SPEC016 defines fade curve application in Fade In/Out handler"
      },
      "suggested_addition": {
        "text": "See [SPEC016 Fade In/Out handlers](SPEC016-decoder_buffer_design.md#fade-inout-handlers) for fade curve application implementation ([DBD-FADE-030]: fade-in, [DBD-FADE-050]: fade-out).",
        "placement": "After XFD-FADE-010 (line 778)"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MINOR",
      "bidirectional": true,
      "notes": "SPEC002 defines fade behavior; SPEC016 implements it"
    },

    {
      "id": "MR-036",
      "location": {
        "document": "SPEC013-single_stream_playback.md",
        "section": "Fade Curve Algorithms",
        "line_range": "500-600",
        "context": "Describes implementation of five fade curves"
      },
      "concept_used": "Fade curve formulas (Linear, Exponential, Logarithmic, Cosine, Equal-Power)",
      "should_reference": {
        "document": "SPEC002-crossfade.md",
        "requirement_id": "XFD-IMPL-091 through XFD-IMPL-096",
        "reason": "SPEC002 contains authoritative fade curve formulas"
      },
      "suggested_addition": {
        "text": "See [SPEC002 Volume Fade Curve Formulas](SPEC002-crossfade.md#volume-fade-curve-formulas) for authoritative fade curve definitions ([XFD-IMPL-091] through [XFD-IMPL-096]).",
        "placement": "Add reference in Fade Curve Algorithms section"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MAJOR",
      "bidirectional": true,
      "notes": "SPEC013 implements fade curves; SPEC002 is authoritative source"
    },

    {
      "id": "MR-037",
      "location": {
        "document": "SPEC014-single_stream_design.md",
        "section": "Clipping Detection",
        "line_range": "580-620",
        "context": "Describes crossfade summation clipping detection"
      },
      "concept_used": "Clipping when crossfade summation exceeds 100%",
      "should_reference": {
        "document": "SPEC002-crossfade.md",
        "requirement_id": "XFD-VOL-030, XFD-VOL-040",
        "reason": "SPEC002 defines clipping prevention policy (none at runtime, warning during editing)"
      },
      "suggested_addition": {
        "text": "See [SPEC002 Clipping Prevention](SPEC002-crossfade.md#clipping-prevention) for policy: [XFD-VOL-030] no runtime clipping prevention, [XFD-VOL-040] UI warning during editing when amplitude >50%.",
        "placement": "Add reference in Clipping Detection section"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MINOR",
      "bidirectional": true,
      "notes": "SPEC014 implements clipping detection; SPEC002 defines policy"
    },

    {
      "id": "MR-038",
      "location": {
        "document": "IMPL001-database_schema.md",
        "section": "Passages table - fade_in_curve and fade_out_curve",
        "line_range": "156-157",
        "context": "Defines fade curve fields as TEXT with enum values"
      },
      "concept_used": "Fade curve enum values",
      "should_reference": {
        "document": "SPEC002-crossfade.md",
        "requirement_id": "XFD-CURV-020, XFD-CURV-030",
        "reason": "SPEC002 defines valid fade curve options"
      },
      "suggested_addition": {
        "text": "See [SPEC002 Fade Curves](SPEC002-crossfade.md#fade-curves) for curve definitions: [XFD-CURV-020] fade-in (exponential, cosine, linear), [XFD-CURV-030] fade-out (logarithmic, cosine, linear).",
        "placement": "Add note in passages table fade curve field descriptions"
      },
      "tier": 3,
      "auto_editable": true,
      "priority": "MINOR",
      "bidirectional": false,
      "notes": "Database schema should reference SPEC002 for valid enum values"
    },

    {
      "id": "MR-039",
      "location": {
        "document": "SPEC016-decoder_buffer_design.md",
        "section": "Operating Parameters",
        "line_range": "78-143",
        "context": "Lists all operating parameters with default values"
      },
      "concept_used": "Operating parameter default values",
      "should_reference": {
        "document": "IMPL001-database_schema.md",
        "requirement_id": "Settings table",
        "reason": "Parameters stored in settings table; should reference database schema"
      },
      "suggested_addition": {
        "text": "See [IMPL001 Database Schema - Settings Table](IMPL001-database_schema.md#settings) for database storage of operating parameters.",
        "placement": "Add reference in DBD-PARAM-010 (line 78)"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MAJOR",
      "bidirectional": true,
      "notes": "SPEC016 defines parameters; IMPL001 stores them; should cross-reference"
    },

    {
      "id": "MR-040",
      "location": {
        "document": "SPEC001-architecture.md",
        "section": "Volume Handling",
        "line_range": "527-541",
        "context": "Specifies volume scale 0.0-1.0 for all systems"
      },
      "concept_used": "Volume level storage and transmission",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-MIX-040",
        "reason": "SPEC016 mixer applies master volume multiplication"
      },
      "suggested_addition": {
        "text": "See [SPEC016 Mixer](SPEC016-decoder_buffer_design.md#mixer) for volume application in mixer ([DBD-MIX-040]: multiply sample values by master volume).",
        "placement": "Add reference in ARCH-VOL-010 section"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MINOR",
      "bidirectional": false,
      "notes": "Architecture volume spec should reference mixer implementation"
    },

    {
      "id": "MR-041",
      "location": {
        "document": "REV004-incremental_buffer_implementation.md",
        "section": "Fix 3: Buffer Underrun Detection",
        "line_range": "181-220",
        "context": "Documents underrun detection with auto-pause and flatline output"
      },
      "concept_used": "Flatline output during pause",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-MIX-050, DBD-MIX-051, DBD-MIX-052",
        "reason": "SPEC016 defines pause mode with exponential decay to flatline"
      },
      "suggested_addition": {
        "text": "See [SPEC016 Mixer - Pause Mode](SPEC016-decoder_buffer_design.md#mixer) for pause behavior specification ([DBD-MIX-050] through [DBD-MIX-052]: exponential decay to flatline).",
        "placement": "Add reference in Fix 3 section"
      },
      "tier": 0,
      "auto_editable": true,
      "priority": "MINOR",
      "bidirectional": false,
      "notes": "Review document should cite authoritative pause behavior"
    },

    {
      "id": "MR-042",
      "location": {
        "document": "SPEC013-single_stream_playback.md",
        "section": "Decoder Thread Pool",
        "line_range": "30-50",
        "context": "Component diagram shows decoder thread pool"
      },
      "concept_used": "Decoder thread pool architecture",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-DEC-040, DBD-PARAM-050, DBD-PARAM-060",
        "reason": "SPEC016 defines serial decoding strategy (not thread pool)"
      },
      "suggested_addition": {
        "text": "**Note:** SPEC016 specifies serial decoding (one decoder at a time, [DBD-DEC-040]) rather than parallel thread pool. See [SPEC016 Decoders](SPEC016-decoder_buffer_design.md#decoders) for authoritative decoder strategy.",
        "placement": "Add note after component diagram (line 50)"
      },
      "tier": 2,
      "auto_editable": false,
      "priority": "CRITICAL",
      "bidirectional": false,
      "notes": "POTENTIAL DISCREPANCY: SPEC013 shows thread pool; SPEC016 specifies serial"
    },

    {
      "id": "MR-043",
      "location": {
        "document": "SPEC002-crossfade.md",
        "section": "Pre-Loading Strategy",
        "line_range": "453-472",
        "context": "Discusses pre-loading trigger calculation (5 seconds before crossfade)"
      },
      "concept_used": "Pre-loading buffer time (5 seconds)",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-PARAM-070",
        "reason": "5 seconds is related to playout_ringbuffer_size (15.01 seconds)"
      },
      "suggested_addition": {
        "text": "Note: 5-second pre-load buffer is 1/3 of [DBD-PARAM-070] playout_ringbuffer_size (15.01 seconds @ 44.1kHz). See [SPEC016 Operating Parameters](SPEC016-decoder_buffer_design.md#operating-parameters).",
        "placement": "Add note after XFD-IMPL-070 (line 467)"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MINOR",
      "bidirectional": false,
      "notes": "Pre-load timing should reference buffer size parameter"
    },

    {
      "id": "MR-044",
      "location": {
        "document": "SPEC016-decoder_buffer_design.md",
        "section": "Sample Format",
        "line_range": "246-248",
        "context": "Specifies stereo f32 sample format"
      },
      "concept_used": "Sample format throughout audio pipeline",
      "should_reference": {
        "document": "SPEC013-single_stream_playback.md",
        "requirement_id": "SSP-DEC-040",
        "reason": "SPEC013 describes interleaved stereo f32 format [L, R, L, R, ...]"
      },
      "suggested_addition": {
        "text": "See [SPEC013 Decoding Flow](SPEC013-single_stream_playback.md#core-components) for interleaved stereo f32 format description.",
        "placement": "Add reference in DBD-FMT-010 (line 246)"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MINOR",
      "bidirectional": true,
      "notes": "Cross-reference sample format between SPEC016 and SPEC013"
    },

    {
      "id": "MR-045",
      "location": {
        "document": "SPEC017-sample_rate_conversion.md",
        "section": "Working Sample Rate",
        "line_range": "194-210",
        "context": "Discusses working_sample_rate and conversion to sample counts"
      },
      "concept_used": "Tick-to-sample conversion at decoder-buffer boundary",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-FADE-010 through DBD-FADE-060",
        "reason": "Fade In/Out handler is where tick-to-sample conversion occurs"
      },
      "suggested_addition": {
        "text": "See [SPEC016 Fade In/Out handlers](SPEC016-decoder_buffer_design.md#fade-inout-handlers) for implementation of tick-to-sample conversion at decoder-buffer boundary ([DBD-FADE-010] through [DBD-FADE-060]).",
        "placement": "Add reference in SRC-COEX-020 (line 228)"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MAJOR",
      "bidirectional": true,
      "notes": "SPEC017 describes conversion point; SPEC016 implements it"
    },

    {
      "id": "MR-046",
      "location": {
        "document": "SPEC016-decoder_buffer_design.md",
        "section": "Fade In/Out handlers",
        "line_range": "195-205",
        "context": "Describes fade curve application and sample discarding"
      },
      "concept_used": "Fade curve application before buffering",
      "should_reference": {
        "document": "SPEC002-crossfade.md",
        "requirement_id": "XFD-IMPL-091 through XFD-IMPL-096",
        "reason": "SPEC002 contains fade curve formulas"
      },
      "suggested_addition": {
        "text": "See [SPEC002 Volume Fade Curve Formulas](SPEC002-crossfade.md#volume-fade-curve-formulas) for fade curve implementations ([XFD-IMPL-091] through [XFD-IMPL-096]).",
        "placement": "Add reference in DBD-FADE-010 section (line 195)"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MAJOR",
      "bidirectional": true,
      "notes": "SPEC016 applies fade curves; SPEC002 defines them"
    },

    {
      "id": "MR-047",
      "location": {
        "document": "SPEC001-architecture.md",
        "section": "Internal Components - Audio Player",
        "line_range": "836-846",
        "context": "Lists Audio Player internal components"
      },
      "concept_used": "Crossfade Mixer component",
      "should_reference": {
        "document": "SPEC016-decoder_buffer_design.md",
        "requirement_id": "DBD-MIX-010 through DBD-MIX-052",
        "reason": "SPEC016 defines mixer responsibilities and behavior"
      },
      "suggested_addition": {
        "text": "See [SPEC016 Mixer](SPEC016-decoder_buffer_design.md#mixer) for complete mixer specification ([DBD-MIX-010] through [DBD-MIX-052]).",
        "placement": "Add reference in Crossfade Mixer bullet (line 844)"
      },
      "tier": 2,
      "auto_editable": true,
      "priority": "MINOR",
      "bidirectional": false,
      "notes": "Architecture component list should reference detailed spec"
    }
  ],

  "discrepancies_requiring_resolution": [
    {
      "id": "DISC-001",
      "title": "Database Timing Storage Format",
      "documents_in_conflict": [
        "SPEC002-crossfade.md (XFD-DB-010): REAL seconds",
        "SPEC017-sample_rate_conversion.md (SRC-DB-011 through SRC-DB-016): INTEGER ticks",
        "IMPL001-database_schema.md (passages table): REAL seconds"
      ],
      "authoritative_source": "SPEC017-sample_rate_conversion.md",
      "required_action": "Update SPEC002 and IMPL001 to use INTEGER ticks for timing fields",
      "priority": "CRITICAL",
      "impact": "Database schema implementation will be incorrect if not resolved"
    },
    {
      "id": "DISC-002",
      "title": "Decoder Parallelization Strategy",
      "documents_in_conflict": [
        "SPEC013-single_stream_playback.md: Decoder Thread Pool",
        "SPEC014-single_stream_design.md: 2-thread decoder pool",
        "SPEC016-decoder_buffer_design.md (DBD-DEC-040): Serial decoding (one at a time)"
      ],
      "authoritative_source": "SPEC016-decoder_buffer_design.md",
      "required_action": "Clarify decoder strategy: serial vs parallel, or update SPEC016 to match thread pool design",
      "priority": "CRITICAL",
      "impact": "Implementation will differ from specification"
    },
    {
      "id": "DISC-003",
      "title": "Timing Precision Representation",
      "documents_in_conflict": [
        "SPEC002-crossfade.md (XFD-IMPL-140): floating-point seconds",
        "SPEC017-sample_rate_conversion.md (SRC-PROB-020, SRC-SOL-010): i64 ticks to avoid floating-point errors"
      ],
      "authoritative_source": "SPEC017-sample_rate_conversion.md",
      "required_action": "Update SPEC002 to use tick-based timing internally (may use floating-point for logging only)",
      "priority": "CRITICAL",
      "impact": "Crossfade timing will accumulate rounding errors if using floating-point"
    }
  ],

  "integration_recommendations": [
    {
      "integration_point": "SPEC002 ↔ SPEC016",
      "relationship": "SPEC002 defines WHEN crossfades occur; SPEC016 defines HOW mixer implements them",
      "bidirectional_references_needed": true,
      "specific_sections": [
        "SPEC002 Implementation Algorithm → SPEC016 Mixer",
        "SPEC002 Volume Calculations → SPEC016 Mixer",
        "SPEC016 Mixer → SPEC002 Crossfade Timing"
      ]
    },
    {
      "integration_point": "SPEC013/SPEC014 → SPEC016",
      "relationship": "SPEC013/SPEC014 describe earlier architecture; SPEC016 is now authoritative",
      "bidirectional_references_needed": false,
      "specific_sections": [
        "SPEC013 should add note: 'SPEC016 now authoritative for decoder-buffer design'",
        "SPEC014 should add note: 'SPEC016 supersedes overlapping sections'",
        "SPEC016 should acknowledge SPEC013/SPEC014 as historical context"
      ]
    },
    {
      "integration_point": "SPEC017 ↔ Database/API specs",
      "relationship": "SPEC017 defines tick system used by database and API",
      "bidirectional_references_needed": true,
      "specific_sections": [
        "IMPL001 passages table → SPEC017 Database Storage",
        "SPEC002 timing values → SPEC017 tick definitions",
        "SPEC007 API timing → SPEC017 API Representation"
      ]
    },
    {
      "integration_point": "SPEC016 ↔ Settings/Configuration",
      "relationship": "SPEC016 defines operating parameters; IMPL001 stores them",
      "bidirectional_references_needed": true,
      "specific_sections": [
        "SPEC016 Operating Parameters → IMPL001 Settings Table",
        "IMPL001 Settings Table → SPEC016 parameter definitions"
      ]
    }
  ],

  "auto_editable_summary": {
    "total_auto_editable": 38,
    "total_manual_review": 9,
    "auto_editable_types": [
      "Simple cross-reference additions (no content change)",
      "Related documentation section additions",
      "Note additions for clarification"
    ],
    "manual_review_types": [
      "Discrepancy resolution (SPEC002 vs SPEC017 timing storage)",
      "Content replacement (correcting incorrect statements)",
      "Architectural reconciliation (thread pool vs serial decoding)"
    ]
  }
}
