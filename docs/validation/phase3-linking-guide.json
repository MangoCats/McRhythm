{
  "document_title": "SPEC016/SPEC017 Linking Guide - Cataloged Concepts",
  "generated": "2025-10-19",
  "purpose": "Comprehensive catalog of all linkable concepts in SPEC016 and SPEC017 for cross-referencing",

  "spec016_decoder_buffer_design": {
    "document_code": "DBD",
    "total_requirement_ids": 63,
    "requirement_categories": {
      "scope": ["DBD-SC-010"],
      "overview": ["DBD-OV-010", "DBD-OV-020", "DBD-OV-030", "DBD-OV-040", "DBD-OV-050", "DBD-OV-060", "DBD-OV-070", "DBD-OV-080"],
      "related_docs": ["DBD-REL-010"],
      "parameters": ["DBD-PARAM-010", "DBD-PARAM-020", "DBD-PARAM-030", "DBD-PARAM-040", "DBD-PARAM-050", "DBD-PARAM-060", "DBD-PARAM-070", "DBD-PARAM-080", "DBD-PARAM-090", "DBD-PARAM-100"],
      "dataflow": ["DBD-FLOW-010", "DBD-FLOW-020", "DBD-FLOW-030", "DBD-FLOW-040", "DBD-FLOW-050", "DBD-FLOW-060", "DBD-FLOW-100", "DBD-FLOW-110"],
      "decoders": ["DBD-DEC-010", "DBD-DEC-020", "DBD-DEC-030", "DBD-DEC-040", "DBD-DEC-050", "DBD-DEC-060", "DBD-DEC-070", "DBD-DEC-080"],
      "resampling": ["DBD-RSMP-010", "DBD-RSMP-020"],
      "fade_handlers": ["DBD-FADE-010", "DBD-FADE-020", "DBD-FADE-030", "DBD-FADE-040", "DBD-FADE-050", "DBD-FADE-060"],
      "buffers": ["DBD-BUF-010", "DBD-BUF-020", "DBD-BUF-030", "DBD-BUF-040", "DBD-BUF-050", "DBD-BUF-060"],
      "mixer": ["DBD-MIX-010", "DBD-MIX-020", "DBD-MIX-030", "DBD-MIX-040", "DBD-MIX-050", "DBD-MIX-051", "DBD-MIX-052"],
      "output": ["DBD-OUT-010"],
      "sample_format": ["DBD-FMT-010", "DBD-FMT-020"]
    },
    "operating_parameters": [
      {
        "id": "DBD-PARAM-020",
        "name": "working_sample_rate",
        "type": "Hz (integer)",
        "default": 44100,
        "description": "Sample rate for all decoded audio before buffering",
        "anchor_recommendation": "#working-sample-rate"
      },
      {
        "id": "DBD-PARAM-030",
        "name": "output_ringbuffer_size",
        "type": "samples (integer)",
        "default": 8192,
        "description": "Max stereo samples in output ring buffer (mixer→output)",
        "anchor_recommendation": "#output-ringbuffer-size"
      },
      {
        "id": "DBD-PARAM-040",
        "name": "output_refill_period",
        "type": "milliseconds (integer)",
        "default": 90,
        "description": "Wall clock time between mixer checks of output buffer state",
        "anchor_recommendation": "#output-refill-period"
      },
      {
        "id": "DBD-PARAM-050",
        "name": "maximum_decode_streams",
        "type": "count (integer)",
        "default": 12,
        "description": "Max number of audio decoders operating on queued passages",
        "anchor_recommendation": "#maximum-decode-streams"
      },
      {
        "id": "DBD-PARAM-060",
        "name": "decode_work_period",
        "type": "milliseconds (integer)",
        "default": 5000,
        "description": "Wall clock time between decode job priority re-evaluation",
        "anchor_recommendation": "#decode-work-period"
      },
      {
        "id": "DBD-PARAM-070",
        "name": "playout_ringbuffer_size",
        "type": "samples (integer)",
        "default": 661941,
        "description": "Stereo samples per decoded/resampled audio buffer (15.01s @ 44.1kHz)",
        "anchor_recommendation": "#playout-ringbuffer-size"
      },
      {
        "id": "DBD-PARAM-080",
        "name": "playout_ringbuffer_headroom",
        "type": "samples (integer)",
        "default": 441,
        "description": "Reserved samples to handle resampler overshoot after pause (0.01s @ 44.1kHz)",
        "anchor_recommendation": "#playout-ringbuffer-headroom"
      },
      {
        "id": "DBD-PARAM-090",
        "name": "pause_decay_factor",
        "type": "ratio (float)",
        "default": 0.96875,
        "description": "Multiplier for exponential decay to zero during pause (31/32)",
        "anchor_recommendation": "#pause-decay-factor"
      },
      {
        "id": "DBD-PARAM-100",
        "name": "pause_decay_floor",
        "type": "amplitude (float)",
        "default": 0.0001778,
        "description": "Absolute amplitude threshold for switching to zero output during pause",
        "anchor_recommendation": "#pause-decay-floor"
      }
    ],
    "component_definitions": [
      {
        "name": "decoder-buffer chain",
        "id": "DBD-OV-040",
        "description": "Pipeline: Queue → Decoder → Resampler → Fade In/Out → Buffer → Mixer → Output",
        "anchor_recommendation": "#decoder-buffer-chain"
      },
      {
        "name": "backpressure",
        "id": "DBD-BUF-050",
        "description": "Flow control via buffer headroom (pause when full)",
        "anchor_recommendation": "#backpressure"
      },
      {
        "name": "mixer",
        "id": "DBD-MIX-010",
        "description": "Combines passage buffers, applies crossfade, volume, and pause decay",
        "anchor_recommendation": "#mixer"
      }
    ]
  },

  "spec017_sample_rate_conversion": {
    "document_code": "SRC",
    "total_requirement_ids": 50,
    "requirement_categories": {
      "scope": ["SRC-SC-010"],
      "problem_statement": ["SRC-PROB-010", "SRC-PROB-020", "SRC-PROB-030", "SRC-PROB-040"],
      "solution": ["SRC-SOL-010", "SRC-SOL-020", "SRC-SOL-030"],
      "rates": ["SRC-RATE-010", "SRC-RATE-011", "SRC-RATE-012", "SRC-RATE-013", "SRC-RATE-014", "SRC-RATE-015", "SRC-RATE-016", "SRC-RATE-017", "SRC-RATE-018", "SRC-RATE-019", "SRC-RATE-020", "SRC-RATE-021"],
      "tick_rate": ["SRC-TICK-010", "SRC-TICK-020", "SRC-TICK-030", "SRC-TICK-040"],
      "conversion": ["SRC-CONV-010", "SRC-CONV-020", "SRC-CONV-030", "SRC-CONV-040", "SRC-CONV-050"],
      "time": ["SRC-TIME-010", "SRC-TIME-020"],
      "precision": ["SRC-PREC-010", "SRC-PREC-020", "SRC-PREC-030", "SRC-PREC-040"],
      "database": ["SRC-DB-010", "SRC-DB-011", "SRC-DB-012", "SRC-DB-013", "SRC-DB-014", "SRC-DB-015", "SRC-DB-016", "SRC-DB-020"],
      "api": ["SRC-API-010", "SRC-API-020", "SRC-API-030", "SRC-API-040", "SRC-API-050"],
      "working_sample_rate": ["SRC-WSR-010", "SRC-WSR-020", "SRC-WSR-030", "SRC-WSR-040", "SRC-WSR-050"],
      "coexistence": ["SRC-COEX-010", "SRC-COEX-020"],
      "implementation": ["SRC-IMPL-010", "SRC-IMPL-020", "SRC-IMPL-030", "SRC-IMPL-040"],
      "example": ["SRC-EXAM-010", "SRC-EXAM-020", "SRC-EXAM-030"]
    },
    "conversion_formulas": [
      {
        "id": "SRC-CONV-010",
        "name": "ticks_per_sample",
        "formula": "ticks_per_sample = 28,224,000 ÷ sample_rate",
        "description": "Calculate ticks per audio sample for any sample rate",
        "anchor_recommendation": "#ticks-per-sample"
      },
      {
        "id": "SRC-CONV-030",
        "name": "samples_to_ticks",
        "formula": "ticks = samples × (28,224,000 ÷ sample_rate)",
        "description": "Convert sample counts to universal tick representation",
        "anchor_recommendation": "#samples-to-ticks"
      },
      {
        "id": "SRC-TIME-010",
        "name": "ticks_to_seconds",
        "formula": "seconds = ticks ÷ 28,224,000",
        "description": "Convert ticks to wall-clock seconds",
        "anchor_recommendation": "#ticks-to-seconds"
      },
      {
        "id": "SRC-API-020",
        "name": "api_to_database",
        "formula": "ticks = milliseconds × 28,224",
        "description": "Convert API milliseconds to database ticks",
        "anchor_recommendation": "#api-to-database"
      },
      {
        "id": "SRC-API-030",
        "name": "database_to_api",
        "formula": "milliseconds = ticks ÷ 28,224 (rounded)",
        "description": "Convert database ticks to API milliseconds",
        "anchor_recommendation": "#database-to-api"
      },
      {
        "id": "SRC-WSR-030",
        "name": "ticks_to_samples_working",
        "formula": "samples = (ticks × working_sample_rate) ÷ 28,224,000",
        "description": "Convert ticks to sample counts at working_sample_rate",
        "anchor_recommendation": "#ticks-to-samples-working"
      },
      {
        "id": "SRC-WSR-040",
        "name": "ticks_to_samples_44100",
        "formula": "samples = ticks ÷ 640",
        "description": "Simplified conversion at 44.1kHz working rate",
        "anchor_recommendation": "#ticks-to-samples-44100"
      }
    ],
    "key_constants": [
      {
        "name": "TICK_RATE",
        "value": 28224000,
        "id": "SRC-TICK-020",
        "description": "Universal tick rate (LCM of all supported sample rates)",
        "units": "Hz"
      },
      {
        "name": "TICK_DURATION",
        "value": "~35.4 nanoseconds",
        "id": "SRC-TICK-030",
        "description": "Duration of one tick (1/28,224,000 second)"
      }
    ],
    "database_fields": [
      {
        "id": "SRC-DB-011",
        "field": "start_time",
        "type": "INTEGER (i64)",
        "description": "Passage start boundary (ticks from file start)"
      },
      {
        "id": "SRC-DB-012",
        "field": "end_time",
        "type": "INTEGER (i64)",
        "description": "Passage end boundary (ticks from file start)"
      },
      {
        "id": "SRC-DB-013",
        "field": "fade_in_point",
        "type": "INTEGER (i64)",
        "description": "Fade-in completion point (ticks from file start)"
      },
      {
        "id": "SRC-DB-014",
        "field": "fade_out_point",
        "type": "INTEGER (i64)",
        "description": "Fade-out start point (ticks from file start)"
      },
      {
        "id": "SRC-DB-015",
        "field": "lead_in_point",
        "type": "INTEGER (i64)",
        "description": "Lead-in end point (ticks from file start)"
      },
      {
        "id": "SRC-DB-016",
        "field": "lead_out_point",
        "type": "INTEGER (i64)",
        "description": "Lead-out start point (ticks from file start)"
      }
    ]
  },

  "glossary_entries": [
    {
      "term": "working_sample_rate",
      "id": "DBD-PARAM-020",
      "definition": "Internal sample rate for all mixing operations (default: 44100Hz)",
      "related_specs": ["SPEC016", "SPEC017"]
    },
    {
      "term": "tick",
      "id": "SRC-TICK-030",
      "definition": "Universal time unit, 1/28,224,000 second (~35.4ns)",
      "related_specs": ["SPEC017"]
    },
    {
      "term": "decoder-buffer chain",
      "id": "DBD-OV-040",
      "definition": "Pipeline: Decoder → Resampler → Fade → Buffer → Mixer",
      "related_specs": ["SPEC016"]
    },
    {
      "term": "backpressure",
      "id": "DBD-BUF-050",
      "definition": "Flow control via buffer headroom to pause decoding when buffer is full",
      "related_specs": ["SPEC016"]
    },
    {
      "term": "playout_ringbuffer",
      "id": "DBD-PARAM-070",
      "definition": "Per-passage decoded audio buffer (default: 661,941 samples = 15.01s @ 44.1kHz)",
      "related_specs": ["SPEC016"]
    },
    {
      "term": "output_ringbuffer",
      "id": "DBD-PARAM-030",
      "definition": "Buffer between mixer and output (default: 8192 samples = 185ms @ 44.1kHz)",
      "related_specs": ["SPEC016"]
    },
    {
      "term": "tick_rate",
      "id": "SRC-TICK-020",
      "definition": "28,224,000 Hz - LCM of all supported audio sample rates",
      "related_specs": ["SPEC017"]
    },
    {
      "term": "sample-accurate timing",
      "id": "SRC-SOL-030",
      "definition": "Any sample boundary from any supported sample rate can be represented exactly as integer ticks",
      "related_specs": ["SPEC017"]
    }
  ],

  "integration_points": [
    {
      "spec_a": "SPEC016",
      "spec_b": "SPEC002",
      "relationship": "Mixer execution (DBD-MIX-040) ↔ Crossfade timing (XFD-IMPL-010)",
      "description": "SPEC002 calculates WHEN passages overlap, SPEC016 defines HOW overlapping audio is mixed"
    },
    {
      "spec_a": "SPEC017",
      "spec_b": "IMPL001",
      "relationship": "Tick storage (SRC-DB-010) ↔ Database schema",
      "description": "SPEC017 defines tick-based timing storage, IMPL001 implements as INTEGER columns"
    },
    {
      "spec_a": "SPEC016",
      "spec_b": "SPEC017",
      "relationship": "Working sample rate (DBD-PARAM-020) ↔ Tick-to-sample conversion (SRC-WSR-030)",
      "description": "SPEC016 defines working_sample_rate parameter, SPEC017 defines conversion from ticks to samples at that rate"
    },
    {
      "spec_a": "SPEC016",
      "spec_b": "SPEC013",
      "relationship": "Authoritative design ↔ Implementation architecture",
      "description": "SPEC016 is authoritative for decoder-buffer design, SPEC013 describes implementation"
    },
    {
      "spec_a": "SPEC016",
      "spec_b": "SPEC014",
      "relationship": "Authoritative design ↔ Implementation decisions",
      "description": "SPEC016 is authoritative for buffer management, SPEC014 describes design rationale"
    },
    {
      "spec_a": "SPEC017",
      "spec_b": "SPEC002",
      "relationship": "Tick system (SRC-TICK-030) ↔ Crossfade calculations (XFD-IMPL-010)",
      "description": "SPEC017 defines universal time units, SPEC002 uses ticks for crossfade timing"
    }
  ],

  "recommended_anchors": {
    "spec016": [
      "#working-sample-rate",
      "#output-ringbuffer-size",
      "#output-refill-period",
      "#maximum-decode-streams",
      "#decode-work-period",
      "#playout-ringbuffer-size",
      "#playout-ringbuffer-headroom",
      "#pause-decay-factor",
      "#pause-decay-floor",
      "#decoder-buffer-chain",
      "#backpressure",
      "#mixer",
      "#fade-handler",
      "#resampler",
      "#operating-parameters"
    ],
    "spec017": [
      "#tick-system",
      "#tick-rate",
      "#ticks-per-sample",
      "#samples-to-ticks",
      "#ticks-to-seconds",
      "#api-to-database",
      "#database-to-api",
      "#ticks-to-samples-working",
      "#ticks-to-samples-44100",
      "#working-sample-rate-conversion",
      "#timing-coexistence",
      "#supported-sample-rates"
    ]
  },

  "linking_statistics": {
    "spec016_total_linkable_concepts": 72,
    "spec017_total_linkable_concepts": 57,
    "operating_parameters": 9,
    "conversion_formulas": 7,
    "component_definitions": 8,
    "database_fields": 6,
    "glossary_terms": 8,
    "integration_points": 6
  }
}
