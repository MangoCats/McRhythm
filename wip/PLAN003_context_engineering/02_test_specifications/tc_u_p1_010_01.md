# TC-U-P1-010-01: CLAUDE.md Contains Mandatory /plan Section

**Test ID:** TC-U-P1-010-01
**Test Type:** Unit Test
**Requirement:** REQ-CE-P1-010
**Priority:** HIGHEST
**Estimated Effort:** 2 minutes to write + implement

---

## Test Specification

**Scope:** CLAUDE.md file content verification

**Given:** CLAUDE.md file exists at project root

**When:** File content is read and analyzed

**Then:** File contains a section titled "Implementation Workflow - MANDATORY"

**Verify:**
```bash
grep -q "## Implementation Workflow - MANDATORY" CLAUDE.md
```

**Pass Criteria:**
- grep returns exit code 0 (pattern found)
- Section appears after line 50 (not in initial boilerplate)
- Section contains at least 100 characters of content (not just header)

**Fail Criteria:**
- grep returns exit code 1 (pattern not found)
- Section header misspelled or different wording
- Section exists but has no content

---

## Expected Content (Minimum)

Section MUST include:
- Statement that `/plan` is MANDATORY for certain features
- Threshold definition (>5 requirements OR novel/complex features)
- Rationale for requirement

Example (from spec):
```markdown
## Implementation Workflow - MANDATORY

**For all features requiring >5 requirements (or complex novel features):**
- MUST run `/plan [specification_document]` before implementing
- MUST resolve all CRITICAL specification issues before coding
- MUST achieve 100% test coverage per traceability matrix
- MUST pass all acceptance tests before considering increment complete

**Rationale:** Proactive specification verification prevents costly rework.
```

---

## Test Procedure

### Automated Execution

```bash
# Test 1: Section exists
if grep -q "## Implementation Workflow - MANDATORY" CLAUDE.md; then
    echo "PASS: Mandatory /plan section found"
else
    echo "FAIL: Mandatory /plan section NOT found"
    exit 1
fi

# Test 2: Section has content (at least 5 lines after header)
SECTION_START=$(grep -n "## Implementation Workflow - MANDATORY" CLAUDE.md | cut -d: -f1)
SECTION_CONTENT=$(sed -n "${SECTION_START},$((SECTION_START + 10))p" CLAUDE.md | wc -l)

if [ "$SECTION_CONTENT" -ge 5 ]; then
    echo "PASS: Section has content"
else
    echo "FAIL: Section header exists but insufficient content"
    exit 1
fi

# Test 3: Threshold mentioned
if sed -n "${SECTION_START},$((SECTION_START + 20))p" CLAUDE.md | grep -q "requirements"; then
    echo "PASS: Threshold criteria mentioned"
else
    echo "FAIL: Threshold not specified"
    exit 1
fi

echo "ALL TESTS PASSED: TC-U-P1-010-01"
```

### Manual Verification

1. Open CLAUDE.md in editor
2. Search for "Implementation Workflow - MANDATORY"
3. Verify section exists and is properly formatted
4. Verify content includes:
   - Mandatory statement
   - Threshold (>5 requirements mentioned)
   - Rationale

---

## Test Data

**Input:** CLAUDE.md file
**Expected Output:** Section exists with required content
**Test Data File:** None (uses production CLAUDE.md)

---

## Implementation File

**File Modified:** CLAUDE.md

**Approximate Location:** After "Development Workflows" section, before "Key Directories"

---

## Dependencies

**Upstream:**
- REQ-CE-P1-010 implemented
- ISSUE-H-001 resolved (threshold decided)

**Downstream:**
- TC-U-P1-010-02 (verifies threshold value)
- TC-S-P1-020-01 (workshop materials reference this section)

---

## Notes

**Design Decisions:**
- Test verifies presence of section, not exact wording (allows minor variations)
- Test verifies threshold mentioned, not specific value (value tested separately in TC-U-P1-010-02)
- Test is lenient (requires "requirements" keyword, not exact phrase)

**Known Limitations:**
- Does not verify section placement (could be at end of file)
- Does not verify grammatical correctness
- Does not verify rationale is compelling (subjective)

**Revision History:**
- 2025-10-25: Initial specification
