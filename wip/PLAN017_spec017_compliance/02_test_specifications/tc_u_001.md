# TC-U-001: wkmp-dr Tick-to-Seconds Conversion

**Test Type:** Unit Test
**Priority:** HIGH
**Automation:** Yes (JavaScript test)
**Requirements:** REQ-F-001

---

## Objective

Verify that wkmp-dr's JavaScript tick-to-seconds conversion function produces mathematically correct results with 6 decimal places precision.

---

## Preconditions

- TICK_RATE constant defined as 28,224,000
- `ticksToSeconds()` function implemented in wkmp-dr/src/ui/app.js

---

## Test Data

| Input (Ticks) | Expected Output (Seconds) | Description |
|---------------|---------------------------|-------------|
| 0 | 0.000000 | Zero duration |
| 28224000 | 1.000000 | Exactly 1 second |
| 141120000 | 5.000000 | 5 seconds (common passage) |
| 14112000 | 0.500000 | Half second |
| 1411200 | 0.050000 | 50 milliseconds |
| 5091840000 | 180.400000 | 3 minutes 0.4 seconds |
| -28224000 | -1.000000 | Negative 1 second (edge case) |

---

## Test Procedure

### Given
- JavaScript function `ticksToSeconds(ticks)` exists in app.js

### When
- Function called with each test data input

### Then
- Output matches expected value exactly (string comparison after `.toFixed(6)`)
- No JavaScript errors thrown
- Function returns string type (e.g., `"5.000000"`)

---

## Implementation

```javascript
// In wkmp-dr/src/ui/app.js or separate test file
function testTicksToSeconds() {
    const testCases = [
        { ticks: 0, expected: "0.000000" },
        { ticks: 28224000, expected: "1.000000" },
        { ticks: 141120000, expected: "5.000000" },
        { ticks: 14112000, expected: "0.500000" },
        { ticks: 1411200, expected: "0.050000" },
        { ticks: 5091840000, expected: "180.400000" },
        { ticks: -28224000, expected: "-1.000000" }
    ];

    let passed = 0;
    let failed = 0;

    testCases.forEach(tc => {
        const result = ticksToSeconds(tc.ticks);
        if (result === tc.expected) {
            console.log(`✅ PASS: ${tc.ticks} → ${result}`);
            passed++;
        } else {
            console.error(`❌ FAIL: ${tc.ticks} → ${result} (expected ${tc.expected})`);
            failed++;
        }
    });

    console.log(`\nResults: ${passed} passed, ${failed} failed`);
    return failed === 0;
}

// Expected function implementation
const TICK_RATE = 28224000;

function ticksToSeconds(ticks) {
    if (ticks === null) return null;
    const seconds = ticks / TICK_RATE;
    return seconds.toFixed(6);
}
```

---

## Pass Criteria

**PASS:** All 7 test cases return expected values
**FAIL:** Any test case returns incorrect value or throws error

---

## Edge Cases Covered

- ✅ Zero value
- ✅ Exact second boundaries
- ✅ Fractional seconds
- ✅ Large values (3+ minutes)
- ✅ Negative values (theoretical, may not occur in practice)
- ⚠️ NULL values (handled separately in display logic, returns null)

---

## Dependencies

- TICK_RATE = 28,224,000 per SPEC017
- JavaScript number precision (IEEE 754 double: 53-bit mantissa, sufficient for ~285 years of ticks)

---

## Notes

- This test verifies the **conversion function** only, not the full display rendering
- Display rendering tested separately in TC-I-002
- Precision: 6 decimal places = microsecond precision (per REQ-F-001)
