# TC-A-001: Developer UI Compliance (SRC-LAYER-011)

**Test Type:** Acceptance Test
**Priority:** HIGH
**Automation:** Partial (manual visual inspection required)
**Requirements:** REQ-F-001, REQ-NF-001

---

## Objective

Verify complete compliance with SPEC017 SRC-LAYER-011: "Developer-facing layers (wkmp-dr database review) display both ticks AND computed seconds for developer inspection."

---

## Preconditions

- SPEC017 specification accessible ([SPEC017-sample_rate_conversion.md](../../docs/SPEC017-sample_rate_conversion.md))
- wkmp-dr running with populated database
- All timing columns in passages table have non-NULL values

---

## Acceptance Criteria

From REQ-F-001:
1. ✅ Format: `{ticks} ({seconds}s)` (e.g., `141120000 (5.000000s)`)
2. ✅ Applies to all 6 timing columns
3. ✅ Decimal precision: exactly 6 places
4. ✅ NULL values: display as `null` (no conversion)

---

## Test Procedure

### Part 1: Visual Inspection (Manual)

**Given:**
- wkmp-dr open in browser
- Passages table selected and visible

**When:**
- User reviews all timing columns

**Then:**
- Each timing column displays BOTH ticks AND seconds
- Format is human-readable (not cryptic tick values alone)
- Developer can verify tick values by mental calculation (e.g., 28224000 ≈ 1 second)

**Verification Checklist:**
```
[ ] start_time_ticks displays dual format
[ ] end_time_ticks displays dual format
[ ] fade_in_start_ticks displays dual format
[ ] fade_out_start_ticks displays dual format
[ ] lead_in_start_ticks displays dual format
[ ] lead_out_start_ticks displays dual format
[ ] Seconds display has 6 decimal places
[ ] NULL values display as "null" (not "NaN" or error)
```

---

### Part 2: Specification Cross-Reference (Manual)

**Given:**
- SPEC017 section "Developer-Facing Layers Use Ticks" (SRC-LAYER-011)

**When:**
- Reviewer compares wkmp-dr implementation to specification requirement

**Then:**
- Implementation matches specification exactly
- No deviations from SRC-LAYER-011 requirement

**Specification Text (SRC-LAYER-011):**
> "Developer-facing layers (wkmp-dr database review) display both ticks AND computed seconds (with appropriate precision) for developer inspection."

**Compliance Check:**
```
[ ] Ticks are displayed (raw integer values visible)
[ ] Seconds are computed and displayed (division by TICK_RATE)
[ ] Precision is appropriate (6 decimal places = microsecond precision)
[ ] Tool is developer-facing (wkmp-dr is database review tool)
```

---

### Part 3: Unit Test Coverage Verification (Automated)

**Given:**
- TC-U-001 (tick-to-seconds conversion) test exists
- TC-I-002 (display rendering) test exists

**When:**
- Both tests executed via `cargo test` or `npm test`

**Then:**
- TC-U-001 passes (conversion accuracy verified)
- TC-I-002 passes (display format verified)

**Command:**
```bash
# Run JavaScript unit test
node wkmp-dr/tests/test_tick_conversion.js

# Run integration test (requires database)
cargo test --package wkmp-dr test_display_rendering
```

**Expected Output:**
```
TC-U-001: ✅ PASS (7/7 test cases)
TC-I-002: ✅ PASS (dual format verified)
```

---

## Pass Criteria

**PASS:** All three parts succeed:
- ✅ Visual inspection confirms dual format in all 6 columns
- ✅ Implementation matches SRC-LAYER-011 specification exactly
- ✅ TC-U-001 and TC-I-002 tests pass

**FAIL:** Any part fails:
- ❌ Any timing column displays ticks only (specification violation)
- ❌ Any timing column displays seconds only (specification violation)
- ❌ Unit or integration tests fail

---

## Evidence Collection

**For audit trail:**
1. **Screenshot:** wkmp-dr passages table showing dual format
2. **Test Output:** Console output from TC-U-001, TC-I-002
3. **Specification Reference:** SPEC017 section SRC-LAYER-011 (line 215-220)

**Example Screenshot Annotation:**
```
[Screenshot: wkmp-dr passages table]
Annotations:
- Red box: start_time_ticks column showing "141120000 (5.000000s)"
- Blue box: fade_in_start_ticks column showing "14112000 (0.500000s)"
- Green box: NULL value showing "null"
Caption: "Developer UI displays both ticks and seconds per SRC-LAYER-011"
```

---

## Traceability

| Requirement | Test Coverage | Status |
|-------------|---------------|--------|
| REQ-F-001 | TC-A-001 (this test) | ✅ Verified |
| REQ-F-001 | TC-U-001 (conversion) | ✅ Verified |
| REQ-F-001 | TC-I-002 (rendering) | ✅ Verified |
| REQ-NF-001 | TC-A-001 (test coverage) | ✅ Verified |

---

## Compliance Confirmation

**Upon successful completion of this test:**

> "I, [Tester Name], confirm that wkmp-dr Database Review UI is fully compliant with SPEC017 requirement SRC-LAYER-011. The developer UI displays both ticks AND seconds for all timing columns, with appropriate precision (6 decimal places). Visual inspection and automated tests confirm compliance."

**Date:** ___________
**Signature:** ___________

---

## Notes

- This is the **primary acceptance test** for REQ-F-001 (HIGH priority)
- Combines manual inspection (visual verification) with automated tests (unit + integration)
- Satisfies REQ-NF-001 requirement for test coverage
- Screenshot evidence recommended for project documentation
- Can be re-run after any wkmp-dr UI changes (regression test)
